/*! 
* DevExtreme (Single Page App Framework)
* Version: 15.2.4
* Build date: Dec 8, 2015
*
* Copyright (c) 2012 - 2015 Developer Express Inc. ALL RIGHTS RESERVED
* EULA: https://www.devexpress.com/Support/EULAs/DevExtreme.xml
*/
"use strict";if(!window.DevExpress||!DevExpress.MOD_FRAMEWORK){if(!window.DevExpress||!DevExpress.MOD_CORE)throw Error("Required module is not referenced: core");(function(n,t,i){var u=t.require("/integration/knockout/ko.templateProvider"),f=function(n,t,i){for(var u=[],r=0,f=n.length;r<f;r++)i(n[r],t)||u.push(n[r]);return u.push.apply(u,t),u},e=function(t,i){var r=!1;return n.each(i,function(n,i){var f=t.option("id")===i.option("id")&&i.option("id"),u=t.option("behavior")===i.option("behavior")&&t.option("behavior");return r=f||u,u&&i.option("onExecute")===null&&i.option("onExecute",t.option("onExecute")),r?(t.element().remove(),!1):void 0}),r},o=function(n,t){return f(n,t,e)},r=function(n,t,r,u){var e=t?t[r]:i,o=e===i?u:e,f=n.option(r);return f===i||f===u?o:f},s=function(n,t){var i=r(n,t,"showText"),u=!!n.option("icon"),f=r(n,t,"title","");return i||!u?f:""},h=function(n,t){var i=r(n,t,"showIcon"),u=!!n.option("title"),f=r(n,t,"icon","");return i||!u?f:""};t.framework={utils:{mergeCommands:o,commandToContainer:{resolveIconValue:h,resolveTextValue:s,resolvePropertyValue:r}},templateProvider:u}})(jQuery,DevExpress),DevExpress.define("/framework/framework.errors",["/utils/utils.error","/errors"],function(n,t){return n(t.ERROR_MESSAGES,{E3001:"Routing rule is not found for the '{0}' URI.",E3002:"The passed object cannot be formatted into a URI string by the application's router. An appropriate route should be registered.",E3003:"Unable to navigate. Application is being initialized.",E3004:"Cannot execute the command: {0}.",E3005:"The '{0}' command {1} is not registered in the application's command mapping. Go to http://dxpr.es/1bTjfj1 for more details.",E3006:"Unknown navigation target: '{0}'. Use the 'current', 'back' or 'blank' values.",E3007:"Error while restoring the application state. The state has been cleared. Refresh the page.",E3008:"Unable to go back.",E3009:"Unable to go forward.",E3010:"The command's 'id' option should be specified.\r\nProcessed markup: {0}\n",E3011:"Layout controller cannot be resolved. There are no appropriate layout controllers for the current context. Check browser console for details.",E3012:"Layout controller cannot be resolved. Two or more layout controllers suit the current context. Check browser console for details.",E3013:"The '{0}' template with the '{1}' name is not found. Make sure the case is correct in the specified view name and the template fits the current context.",E3014:"All the children of the dxView element should be either of the dxCommand or dxContent type.\r\nProcessed markup: {0}",E3015:"The 'exec' method should be called before the 'finalize' method.",E3016:"Unknown transition type '{0}'.",E3018:"Unable to parse options.\nMessage: {0};\nOptions value: {1}.",E3019:"View templates should be updated according to the 13.1 changes. Go to http://dxpr.es/15ikrJA for more details.",E3020:"Concurrent templates are found:\r\n{0}Target device:\r\n{1}.",E3021:"Remote template cannot be loaded.\r\nUrl:{0}\r\nError:{1}.",E3022:"Cannot initialize the HtmlApplication component.",E3023:"Navigation item is not found",E3024:"Layout controller is not initialized",W3001:"A view with the '{0}' key doesn't exist.",W3002:"A view with the '{0}' key has already been released.",W3003:"Layout resolving context:\n{0}\nAvailable layout controller registrations:\n{1}\n",W3004:"Layout resolving context:\n{0}\nConcurent layout controller registrations for the context:\n{1}\n",W3005:'Direct hash-based navigation is detected in a mobile application. Use data-bind="dxAction: url" instead of href="#url" to avoid navigation issues.\nFound markup:\n{0}\n'})}),function(n,t){var i=encodeURIComponent("json:"),r=DevExpress.require("/class");t.framework.Route=r.inherit({_trimSeparators:function(n){return n.replace(/^[\/.]+|\/+$/g,"")},_escapeRe:function(n){return n.replace(/\W/g,"\\$1")},_checkConstraint:function(n,t){n=String(n),typeof t=="string"&&(t=new RegExp(t));var i=t.exec(n);return!i||i[0]!==n?!1:!0},_ensureReady:function(){var t=this;if(this._patternRe)return!1;this._pattern=this._trimSeparators(this._pattern),this._patternRe="",this._params=[],this._segments=[],this._separators=[],this._pattern.replace(/[^\/]+/g,function(n,i){t._segments.push(n),i&&t._separators.push(t._pattern.substr(i-1,1))}),n.each(this._segments,function(n){var u=!0,i=this,r=n?t._separators[n-1]:"";i.charAt(0)===":"?(u=!1,i=i.substr(1),t._params.push(i),t._patternRe+="(?:"+r+"([^/]*))",i in t._defaults&&(t._patternRe+="?")):t._patternRe+=r+t._escapeRe(i)}),this._patternRe=new RegExp("^"+this._patternRe+"$")},ctor:function(n,t,i){this._pattern=n||"",this._defaults=t||{},this._constraints=i||{}},parse:function(t){var u=this,i,r;return(this._ensureReady(),i=this._patternRe.exec(t),!i)?!1:(r=n.extend({},this._defaults),n.each(this._params,function(n){var t=n+1;i.length>=t&&i[t]&&(r[this]=u.parseSegment(i[t]))}),n.each(this._constraints,function(n){if(!u._checkConstraint(r[n],u._constraints[n]))return r=!1,!1}),r)},format:function(t){var r=this,u="",c,o;this._ensureReady();var f=n.extend({},this._defaults),s=0,i=[],h=[],e={};return(n.each(t,function(n,i){t[n]=r.formatSegment(i),n in f||(e[n]=!0)}),n.each(this._segments,function(n,u){if(i[n]=n?r._separators[n-1]:"",u.charAt(0)===":"){var o=u.substr(1);if(!(o in t)&&!(o in r._defaults)||o in r._constraints&&!r._checkConstraint(t[o],r._constraints[o]))return i=null,!1;o in t?(t[o]!==undefined&&(f[o]=t[o],i[n]+=t[o],s=n),delete e[o]):o in f&&(i[n]+=f[o],h.push(n))}else i[n]+=u,s=n}),n.each(f,function(u,f){if(!!f&&n.inArray(":"+u,r._segments)===-1&&t[u]!==f)return i=null,!1}),c=0,n.isEmptyObject(e)||(u="?",n.each(e,function(n){u+=n+"="+t[n]+"&",c++}),u=u.substr(0,u.length-1)),i===null)?!1:(h.length&&n.map(h,function(n){n>=s&&(i[n]="")}),o=i.join(""),o=o.replace(/\/+$/,""),{uri:o+u,unusedCount:c})},formatSegment:function(t){return n.isArray(t)||n.isPlainObject(t)?i+encodeURIComponent(JSON.stringify(t)):encodeURIComponent(t)},parseSegment:function(t){if(t.substr(0,i.length)===i)try{return n.parseJSON(decodeURIComponent(t.substr(i.length)))}catch(r){}return decodeURIComponent(t)}}),t.framework.Router=r.inherit({ctor:function(){this._registry=[]},_trimSeparators:function(n){return n.replace(/^[\/.]+|\/+$/g,"")},_createRoute:function(n,i,r){return new t.framework.Route(n,i,r)},register:function(n,t,i){this._registry.push(this._createRoute(n,t,i))},_parseQuery:function(t){var i={},r=t.split("&");return n.each(r,function(n,t){var r=t.split("=");i[r[0]]=decodeURIComponent(r[1])}),i},parse:function(t){var f=this,i;t=this._trimSeparators(t);var r=t.split("?",2),e=r[0],u=r[1];return n.each(this._registry,function(){var t=this.parse(e);if(t!==!1)return i=t,u&&(i=n.extend(i,f._parseQuery(u))),!1}),i?i:!1},format:function(t){var i=!1,r=99999;return t=t||{},n.each(this._registry,function(){var f=n.extend(!0,{},t),u=this.format(f);u!==!1&&r>u.unusedCount&&(r=u.unusedCount,i=u.uri)}),i}})}(jQuery,DevExpress),function(n,t){var i=DevExpress.require("/framework/framework.errors"),r=t.require("/componentRegistrator"),u=t.require("/domComponent"),f=u.inherit({ctor:function(t,i){n.isPlainObject(t)&&(i=t,t=n("<div />")),this.callBase(t,i)},_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{iconSrc:{since:"15.1",alias:"icon"}})},_getDefaultOptions:function(){return n.extend(this.callBase(),{onExecute:null,id:null,title:"",icon:"",visible:!0,disabled:!1,renderStage:"onViewShown"})},execute:function(){var t=this._options.disabled;if(n.isFunction(t)&&(t=!!t.apply(this,arguments)),t)throw i.Error("E3004",this._options.id);this.fireEvent("beforeExecute",arguments),this._createActionByOption("onExecute").apply(this,arguments),this.fireEvent("afterExecute",arguments)},_render:function(){this.callBase(),this.element().addClass("dx-command")},_renderDisabledState:n.noop,_dispose:function(){this.callBase(),this.element().removeData(this.NAME)}});r("dxCommand",t.framework,f)}(jQuery,DevExpress),function(n,t){var i=DevExpress.require("/class"),r=DevExpress.require("/framework/framework.errors");t.framework.CommandMapping=i.inherit({ctor:function(){this._commandMappings={},this._containerDefaults={}},setDefaults:function(n,t){return this._containerDefaults[n]=t,this},mapCommands:function(t,i){var r=this;return n.each(i,function(i,u){typeof u=="string"&&(u={id:u});var e=u.id,f=r._commandMappings[t]||{};f[e]=n.extend({showIcon:!0,showText:!0},r._containerDefaults[t]||{},u),r._commandMappings[t]=f}),this._initExistingCommands(),this},unmapCommands:function(t,i){var r=this;n.each(i,function(n,i){var u=r._commandMappings[t]||{};u&&delete u[i]}),this._initExistingCommands()},getCommandMappingForContainer:function(n,t){return(this._commandMappings[t]||{})[n]},checkCommandsExist:function(t){var u=this,i=n.grep(t,function(i,r){return n.inArray(i,u._existingCommands)<0&&n.inArray(i,t)===r});if(i.length!==0)throw r.Error("E3005",i.join("', '"),i.length===1?" is":"s are");},load:function(t){if(t){var i=this;return n.each(t,function(n,t){i.setDefaults(n,t.defaults),i.mapCommands(n,t.commands)}),this}},_initExistingCommands:function(){var t=this;this._existingCommands=[],n.each(t._commandMappings,function(i,r){n.each(r,function(i,r){n.inArray(r.id,t._existingCommands)<0&&t._existingCommands.push(r.id)})})}}),t.framework.CommandMapping.defaultMapping={"global-navigation":{defaults:{showIcon:!0,showText:!0},commands:[]},"ios-header-toolbar":{defaults:{showIcon:!1,showText:!0,location:"after"},commands:["edit","save",{id:"back",location:"before"},{id:"cancel",location:"before"},{id:"create",showIcon:!0,showText:!1}]},"ios-action-sheet":{defaults:{showIcon:!1,showText:!0},commands:[]},"ios-view-footer":{defaults:{showIcon:!1,showText:!0},commands:[{id:"delete",type:"danger"}]},"android-header-toolbar":{defaults:{showIcon:!0,showText:!1,location:"after"},commands:[{id:"back",showIcon:!1,location:"before"},"create",{id:"save",showText:!0,showIcon:!1,location:"after"},{id:"edit",showText:!1,location:"after"},{id:"cancel",showText:!1,location:"before"},{id:"delete",showText:!1,location:"after"}]},"android-simple-toolbar":{defaults:{showIcon:!0,showText:!1,location:"after"},commands:[{id:"back",showIcon:!1,location:"before"},{id:"create"},{id:"save",showText:!0,showIcon:!1,location:"after"},{id:"edit",showText:!1,location:"after"},{id:"cancel",showText:!1,location:"before"},{id:"delete",showText:!1,location:"after"}]},"android-footer-toolbar":{defaults:{location:"after"},commands:[{id:"create",showText:!1,location:"center"},{id:"edit",showText:!1,location:"before"},{id:"delete",location:"menu"},{id:"save",showIcon:!1,location:"before"}]},"generic-header-toolbar":{defaults:{showIcon:!1,showText:!0,location:"after"},commands:["edit","save",{id:"back",location:"before"},{id:"cancel",location:"before"},{id:"create",showIcon:!0,showText:!1}]},"generic-view-footer":{defaults:{showIcon:!1,showText:!0},commands:[{id:"delete",type:"danger"}]},"win8-appbar":{defaults:{location:"after"},commands:["edit","cancel","save","delete",{id:"create",location:"before"},{id:"refresh",location:"before"}]},"win8-toolbar":{defaults:{showText:!1,location:"before"},commands:[{id:"previousPage"}]},"win8-phone-appbar":{defaults:{location:"center"},commands:["create","edit","cancel","save","refresh",{id:"delete",location:"menu"}]},"win8-split-toolbar":{defaults:{showIcon:!0,showText:!1,location:"after"},commands:[{id:"back",showIcon:!1,location:"before"},{id:"create"},{id:"save",showText:!0,location:"before"},{id:"edit",showText:!0,location:"menu"},{id:"cancel",showText:!0,location:"menu"},{id:"delete",showText:!0,location:"menu"}]},"win8-master-detail-toolbar":{defaults:{showText:!1,location:"before"},commands:["back"]},"desktop-toolbar":{defaults:{showIcon:!1,showText:!0,location:"after"},commands:["cancel","create","edit","save",{id:"delete",type:"danger"}]}}}(jQuery,DevExpress),function(n,t){var r=DevExpress.require("/class"),u=t.require("/eventsMixin"),f;t.framework.ViewCache=r.inherit({ctor:function(){this._cache={}},setView:function(n,t){this._cache[n]=t},getView:function(n){return this._cache[n]},removeView:function(n){var t=this._cache[n];return t&&(delete this._cache[n],this.fireEvent("viewRemoved",[{viewInfo:t}])),t},clear:function(){var t=this;n.each(this._cache,function(n){t.removeView(n)})},hasView:function(n){return n in this._cache}}).include(u),t.framework.NullViewCache=t.framework.ViewCache.inherit({setView:function(n,t){this.callBase(n,t),this.removeView(n)}}),t.framework.ConditionalViewCacheDecorator=r.inherit({ctor:function(n){this._filter=n.filter,this._viewCache=n.viewCache,this.viewRemoved=this._viewCache.viewRemoved,this._events=this._viewCache._events},setView:function(n,t){this._viewCache.setView(n,t),this._filter(n,t)||this._viewCache.removeView(n)},getView:function(n){return this._viewCache.getView(n)},removeView:function(n){return this._viewCache.removeView(n)},clear:function(){return this._viewCache.clear()},hasView:function(n){return this._viewCache.hasView(n)}}).include(u),f=5,t.framework.CapacityViewCacheDecorator=r.inherit({ctor:function(n){this._keys=[],this._size=n.size||f,this._viewCache=n.viewCache,this.viewRemoved=this._viewCache.viewRemoved,this._events=this._viewCache._events},setView:function(n,t){this.hasView(n)||(this._keys.length===this._size&&this.removeView(this._keys[0]),this._keys.push(n)),this._viewCache.setView(n,t)},getView:function(t){var i=n.inArray(t,this._keys);return i<0?null:(this._keys.push(t),this._keys.splice(i,1),this._viewCache.getView(t))},removeView:function(t){var i=n.inArray(t,this._keys);return i>-1&&this._keys.splice(i,1),this._viewCache.removeView(t)},clear:function(){return this._keys=[],this._viewCache.clear()},hasView:function(n){return this._viewCache.hasView(n)}}).include(u),t.framework.HistoryDependentViewCacheDecorator=r.inherit({ctor:function(i){this._viewCache=i.viewCache||new t.framework.ViewCache,this._navigationManager=i.navigationManager;this._navigationManager.on("itemRemoved",n.proxy(this._onNavigationItemRemoved,this));this.viewRemoved=this._viewCache.viewRemoved,this._events=this._viewCache._events},_onNavigationItemRemoved:function(n){this.removeView(n.key)},setView:function(n,t){this._viewCache.setView(n,t)},getView:function(n){return this._viewCache.getView(n)},removeView:function(n){return this._viewCache.removeView(n)},clear:function(){return this._viewCache.clear()},hasView:function(n){return this._viewCache.hasView(n)}}).include(u)}(jQuery,DevExpress),function(n,t){var r=DevExpress.require("/class");t.framework.MemoryKeyValueStorage=r.inherit({ctor:function(){this.storage={}},getItem:function(n){return this.storage[n]},setItem:function(n,t){this.storage[n]=t},removeItem:function(n){delete this.storage[n]}}),t.framework.StateManager=r.inherit({ctor:function(n){n=n||{},this.storage=n.storage||new t.framework.MemoryKeyValueStorage,this.stateSources=n.stateSources||[]},addStateSource:function(n){this.stateSources.push(n)},removeStateSource:function(t){var i=n.inArray(t,this.stateSources);i>-1&&(this.stateSources.splice(i,1),t.removeState(this.storage))},saveState:function(){var t=this;n.each(this.stateSources,function(n,i){i.saveState(t.storage)})},restoreState:function(){var t=this;n.each(this.stateSources,function(n,i){i.restoreState(t.storage)})},clearState:function(){var t=this;n.each(this.stateSources,function(n,i){i.removeState(t.storage)})}})}(jQuery,DevExpress),function(n,t){var u=DevExpress.require("/class"),f=t.require("/utils/utils.queue"),r="__root__",e="__buffer__";t.framework.DefaultBrowserAdapter=u.inherit({ctor:function(t){t=t||{},this._window=t.window||window,this.popState=n.Callbacks();n(this._window).on("hashchange",n.proxy(this._onHashChange,this));this._tasks=f.create(),this.canWorkInPureBrowser=!0},replaceState:function(n){var t=this;return this._addTask(function(){n=t._normalizeUri(n),t._window.history.replaceState(null,null,"#"+n),t._currentTask.resolve()})},pushState:function(n){var t=this;return this._addTask(function(){n=t._normalizeUri(n),t._window.history.pushState(null,null,"#"+n),t._currentTask.resolve()})},createRootPage:function(){return this.replaceState(r)},_onHashChange:function(){this._currentTask&&this._currentTask.resolve(),this.popState.fire()},back:function(){var n=this;return this._addTask(function(){n._window.history.back()})},getHash:function(){return this._normalizeUri(this._window.location.hash)},isRootPage:function(){return this.getHash()===r},_normalizeUri:function(n){return(n||"").replace(/^#+/,"")},_addTask:function(t){var r=this,i=n.Deferred();return this._tasks.add(function(){return r._currentTask=i,t(),i}),i.promise()}}),t.framework.OldBrowserAdapter=t.framework.DefaultBrowserAdapter.inherit({ctor:function(){this._innerEventCount=0,this.callBase.apply(this,arguments),this._skipNextEvent=!1},replaceState:function(t){var i=this;return(t=i._normalizeUri(t),i.getHash()!==t)?(i._addTask(function(){i._skipNextEvent=!0,i._window.history.back()}),i._addTask(function(){i._skipNextEvent=!0,i._window.location.hash=t})):n.Deferred().resolve().promise()},pushState:function(t){var i=this;return(t=this._normalizeUri(t),this.getHash()!==t)?i._addTask(function(){i._skipNextEvent=!0,i._window.location.hash=t}):n.Deferred().resolve().promise()},createRootPage:function(){return this.pushState(r)},_onHashChange:function(){var n=this._currentTask;this._currentTask=null,this._skipNextEvent?this._skipNextEvent=!1:this.popState.fire(),n&&n.resolve()}}),t.framework.BuggyAndroidBrowserAdapter=t.framework.OldBrowserAdapter.inherit({createRootPage:function(){return this.pushState(e),this.callBase()}}),t.framework.HistorylessBrowserAdapter=t.framework.DefaultBrowserAdapter.inherit({ctor:function(t){t=t||{},this._window=t.window||window,this.popState=n.Callbacks();n(this._window).on("dxback",n.proxy(this._onHashChange,this));this._currentHash=this._window.location.hash},replaceState:function(t){return this._currentHash=this._normalizeUri(t),n.Deferred().resolve().promise()},pushState:function(n){return this.replaceState(n)},createRootPage:function(){return this.replaceState(r)},getHash:function(){return this._normalizeUri(this._currentHash)},back:function(){return this.replaceState(r)},_onHashChange:function(){var n=this.back();return this.popState.fire(),n}}),t.framework.BuggyCordovaWP81BrowserAdapter=t.framework.DefaultBrowserAdapter.inherit({ctor:function(n){this.callBase(n),this.canWorkInPureBrowser=!1}})}(jQuery,DevExpress),function(n,t){var e=DevExpress.require("/class"),f=t.require("/utils/utils.storage"),r=t.require("/devices"),u="dxPhoneJSApplication";t.framework.HistoryBasedNavigationDevice=e.inherit({ctor:function(t){t=t||{},this._browserAdapter=t.browserAdapter||this._createBrowserAdapter(t),this.uriChanged=n.Callbacks(),this._browserAdapter.popState.add(n.proxy(this._onPopState,this))},init:n.noop,getUri:function(){return this._browserAdapter.getHash()},setUri:function(t,i){return i?this._browserAdapter.replaceState(t):t!==this.getUri()?this._browserAdapter.pushState(t):n.Deferred().resolve().promise()},back:function(){return this._browserAdapter.back()},_onPopState:function(){this.uriChanged.fire(this.getUri())},_isBuggyAndroid2:function(){var t=r.real(),n=t.version;return t.platform==="android"&&n.length>1&&(n[0]===2&&n[1]<4||n[0]<2)},_isBuggyAndroid4:function(){var t=r.real(),n=t.version;return t.platform==="android"&&n.length>1&&n[0]===4&&n[1]===0},_isWindowsPhone8:function(){var n=r.real();return n.platform==="win"&&n.phone},_createBrowserAdapter:function(n){var r=n.window||window,u=r.history.replaceState&&r.history.pushState,i;return i=this._isWindowsPhone8()?new t.framework.BuggyCordovaWP81BrowserAdapter(n):r!==r.top?new t.framework.HistorylessBrowserAdapter(n):this._isBuggyAndroid4()?new t.framework.BuggyAndroidBrowserAdapter(n):this._isBuggyAndroid2()||!u?new t.framework.OldBrowserAdapter(n):new t.framework.DefaultBrowserAdapter(n)}}),t.framework.StackBasedNavigationDevice=t.framework.HistoryBasedNavigationDevice.inherit({ctor:function(t){this.callBase(t),this.backInitiated=n.Callbacks(),this._rootStateHandler=null;n(window).on("unload",this._saveBrowserState)},init:function(){var t=this;return t._browserAdapter.canWorkInPureBrowser?t._initRootPage().done(function(){t._browserAdapter.isRootPage()&&t._browserAdapter.pushState("")}):n.Deferred().resolve().promise()},setUri:function(n){return this.callBase(n,!this._browserAdapter.isRootPage())},_saveBrowserState:function(){var n=f.sessionStorage();n&&n.setItem(u,!0)},_initRootPage:function(){var i=this.getUri(),t=f.sessionStorage();return!t||t.getItem(u)?n.Deferred().resolve().promise():(t.removeItem(u),this._browserAdapter.createRootPage(),this._browserAdapter.pushState(i))},_onPopState:function(){this._browserAdapter.isRootPage()?this._rootStateHandler?this._rootStateHandler():this.backInitiated.fire():(this._rootStateHandler||this._createRootStateHndler(),this.back())},_createRootStateHndler:function(){var n=this.getUri();this._rootStateHandler=function(){this.uriChanged.fire(n),this._rootStateHandler=null}}})}(jQuery,DevExpress),function(n,t,i){var f=t.require("/class"),o=t.require("/eventsMixin"),u=t.require("/framework/framework.errors"),s=t.require("/utils/utils.common"),h=t.require("/utils/utils.hardwareBack").processCallback,e=t.require("/utils/utils.topOverlay").hide,r={current:"current",blank:"blank",back:"back"},c="__history";t.framework.HistoryBasedNavigationManager=f.inherit({ctor:function(n){n=n||{},this._currentItem=i,this._previousItem=i,this._createNavigationDevice(n)},_createNavigationDevice:function(i){this._navigationDevice=i.navigationDevice||new t.framework.HistoryBasedNavigationDevice,this._navigationDevice.uriChanged.add(n.proxy(this._uriChangedHandler,this))},_uriChangedHandler:function(n){while(e());this.navigate(n)},_syncUriWithCurrentNavigationItem:function(){var n=this._currentItem&&this._currentItem.uri;this._navigationDevice.setUri(n,!0)},_cancelNavigation:function(n){this._syncUriWithCurrentNavigationItem(),this.fireEvent("navigationCanceled",[n])},_getDefaultOptions:function(){return{direction:"none",target:r.blank}},_updateHistory:function(n,t){this._previousItem=this._currentItem,this._currentItem={uri:n,key:n},this._navigationDevice.setUri(n,t.target===r.current)},_setCurrentItem:function(n){this._currentItem=n},navigate:function(t,u){u=u||{};var f=this,l=!f._currentItem,h=f._currentItem||{},a=u.item||{},o=h.uri,v=h.key,c=a.key,e;if(t===i&&(t=f._navigationDevice.getUri()),/^_back$/.test(t)){f.back();return}u=n.extend(f._getDefaultOptions(),u||{}),l&&(u.target=r.current),e={currentUri:o,uri:t,cancel:!1,navigateWhen:[],options:u},f.fireEvent("navigating",[e]),t=e.uri,e.cancel||o===t&&(c===i||c===v)&&!f._forceNavigate?f._cancelNavigation(e):(f._forceNavigate=!1,n.when.apply(n,e.navigateWhen).done(function(){s.executeAsync(function(){f._updateHistory(t,u),f.fireEvent("navigated",[{uri:t,previousUri:o,options:u,item:f._currentItem}])})}))},back:function(){return this._navigationDevice.back()},previousItem:function(){return this._previousItem},currentItem:function(n){if(arguments.length>0){if(!n)throw u.Error("E3023");this._setCurrentItem(n)}else return this._currentItem},rootUri:function(){return this._currentItem&&this._currentItem.uri},canBack:function(){return!0},saveState:n.noop,restoreState:n.noop,removeState:n.noop}).include(o),t.framework.StackBasedNavigationManager=t.framework.HistoryBasedNavigationManager.inherit({ctor:function(t){t=t||{},this.callBase(t),this._createNavigationStacks(t),h.add(n.proxy(this._deviceBackInitiated,this)),this._stateStorageKey=t.stateStorageKey||c},init:function(){return this._navigationDevice.init()},_createNavigationDevice:function(i){i.navigationDevice||(i.navigationDevice=new t.framework.StackBasedNavigationDevice),this.callBase(i),this._navigationDevice.backInitiated.add(n.proxy(this._deviceBackInitiated,this))},_uriChangedHandler:function(n){this.navigate(n)},_createNavigationStacks:function(n){this.navigationStacks={},this._keepPositionInStack=n.keepPositionInStack,this.currentStack=new t.framework.NavigationStack},_deviceBackInitiated:function(){e()?this._syncUriWithCurrentNavigationItem():this.back({isHardwareButton:!0})},_getDefaultOptions:function(){return{target:r.blank}},_createNavigationStack:function(){var i=new t.framework.NavigationStack;return i.itemsRemoved.add(n.proxy(this._removeItems,this)),i},_setCurrentItem:function(n){this._setCurrentStack(n.stack),this.currentStack.currentItem(n),this.callBase(n),this._syncUriWithCurrentNavigationItem()},_setCurrentStack:function(t){var r,i;typeof t=="string"?(i=t,i in this.navigationStacks||(this.navigationStacks[i]=this._createNavigationStack()),r=this.navigationStacks[i]):(r=t,i=n.map(this.navigationStacks,function(n,i){return n===t?i:null})[0]),this.currentStack=r,this.currentStackKey=i},_getViewTargetStackKey:function(n,t){var r,u;if(t)if(this.navigationStacks[n]!==i)r=n;else{for(u in this.navigationStacks)if(this.navigationStacks[u].items[0].uri===n){r=u;break}r=r||n}else r=this.currentStackKey||n;return r},_updateHistory:function(n,t){var f=t.root,o=f,s=!1,l=this.currentStack,a=t.keepPositionInStack!==i?t.keepPositionInStack:this._keepPositionInStack,h,c,e;if(t.stack=t.stack||this._getViewTargetStackKey(n,f),this._setCurrentStack(t.stack),(f||!this.currentStack.items.length)&&(s=this.currentStack===l,o=!0),f&&this.currentStack.items.length)(!a||s)&&(this.currentStack.currentIndex=0,this.currentItem().uri!==n&&this.currentStack.navigate(n,!0)),t.direction=t.direction||"none";else{h=this.currentStack.currentIndex,c=this.currentItem()||{};switch(t.target){case r.blank:this.currentStack.navigate(n);break;case r.current:this.currentStack.navigate(n,!0);break;case r.back:this.currentStack.currentIndex>0?this.currentStack.back(n):this.currentStack.navigate(n,!0);break;default:throw u.Error("E3006",t.target);}t.direction===i&&(e=this.currentStack.currentIndex-h,t.direction=e<0?this.currentStack.currentItem().backDirection||"backward":e>0&&this.currentStack.currentIndex>0?"forward":"none"),c.backDirection=t.direction==="forward"?"backward":"none"}t.root=o,this._currentItem=this.currentStack.currentItem(),this._syncUriWithCurrentNavigationItem()},_removeItems:function(t){var i=this;n.each(t,function(n,t){i.fireEvent("itemRemoved",[t])})},back:function(t){var i,u;if(t=t||{},i=n.extend({cancel:!1},t),this.fireEvent("navigatingBack",[i]),i.cancel){this._syncUriWithCurrentNavigationItem();return}u=this.previousItem(i.stack),u?this.navigate(u.uri,{stack:i.stack,target:r.back,item:u}):this.callBase()},rootUri:function(){return this.currentStack.items.length?this.currentStack.items[0].uri:this.callBase()},canBack:function(n){var t=n?this.navigationStacks[n]:this.currentStack;return t.canBack()},saveState:function(t){var i,r;this.currentStack.items.length?(i={navigationStacks:{},currentStackKey:this.currentStackKey},n.each(this.navigationStacks,function(t,r){var u={};i.navigationStacks[t]=u,u.currentIndex=r.currentIndex,u.items=n.map(r.items,function(n){return{key:n.key,uri:n.uri}})}),r=JSON.stringify(i),t.setItem(this._stateStorageKey,r)):this.removeState(t)},restoreState:function(t){var i,r,f;if(!this.disableRestoreState&&(i=t.getItem(this._stateStorageKey),i))try{r=this,f=JSON.parse(i),n.each(f.navigationStacks,function(t,i){var u=r._createNavigationStack();r.navigationStacks[t]=u,u.currentIndex=i.currentIndex,u.items=n.map(i.items,function(n){return n.stack=u,n})}),this.currentStackKey=f.currentStackKey,this.currentStack=this.navigationStacks[this.currentStackKey],this._currentItem=this.currentStack.currentItem(),this._navigationDevice.setUri(this.currentItem().uri),this._forceNavigate=!0}catch(e){this.removeState(t);throw u.Error("E3007");}},removeState:function(n){n.removeItem(this._stateStorageKey)},currentIndex:function(){return this.currentStack.currentIndex},previousItem:function(n){var t=this.navigationStacks[n]||this.currentStack;return t.previousItem()},getItemByIndex:function(n){return this.currentStack.items[n]},clearHistory:function(){this.currentStack.clear()},itemByKey:function(t){var i;return n.each(this.navigationStacks,function(n,r){var u=r.itemByKey(t);if(u)return i=u,!1}),i},currentItem:function(t){var i;if(arguments.length>0)typeof t=="string"?i=this.itemByKey(t):n.isPlainObject(t)&&(i=t),this.callBase(i);else return this.callBase()}}),t.framework.NavigationStack=f.inherit({ctor:function(t){t=t||{},this.itemsRemoved=n.Callbacks(),this.clear()},currentItem:function(n){if(n){for(var t=0;t<this.items.length;t++)if(n===this.items[t]){this.currentIndex=t;break}}else return this.items[this.currentIndex]},previousItem:function(){return this.items.length>1?this.items[this.currentIndex-1]:i},canBack:function(){return this.currentIndex>0},clear:function(){this._deleteItems(this.items),this.items=[],this.currentIndex=-1},back:function(n){if(this.currentIndex--,this.currentIndex<0)throw u.Error("E3008");var t=this.currentItem();t.uri!==n&&this._updateItem(this.currentIndex,n)},forward:function(){if(this.currentIndex++,this.currentIndex>=this.items.length)throw u.Error("E3009");},navigate:function(n,t){if(!(this.currentIndex<this.items.length)||!(this.currentIndex>-1)||this.items[this.currentIndex].uri!==n){if(t&&this.currentIndex>-1&&this.currentIndex--,this.currentIndex+1<this.items.length&&this.items[this.currentIndex+1].uri===n)this.currentIndex++;else{var i=this.items.splice(this.currentIndex+1,this.items.length-this.currentIndex-1);this.items.push({stack:this}),this.currentIndex++,this._updateItem(this.currentIndex,n),this._deleteItems(i)}return this.currentItem()}},itemByKey:function(n){for(var i,t=0;t<this.items.length;t++)if(i=this.items[t],i.key===n)return i},_updateItem:function(n,t){var i=this.items[n];i.uri=t,i.key=this.items[0].uri+"_"+n+"_"+t},_deleteItems:function(n){n&&this.itemsRemoved.fire(n)}})}(jQuery,DevExpress),function(n,t,i){function r(t,i){if(i.args){var r=i.args[0];t.jQueryEvent=r.jQueryEvent}(i.component||{}).NAME==="dxCommand"&&n.extend(t,i.component.option())}function u(t){if(t){var i=n(t.target);i.attr("href")&&t.preventDefault()}}t.framework.createActionExecutors=function(f){return{routing:{execute:function(t){var e=t.action,o={},i,s;n.isPlainObject(e)&&(i=e.routeValues,i&&n.isPlainObject(i)?o=e.options:i=e,s=f.router.format(i),r(o,t),u(o.jQueryEvent),f.navigate(s,o),t.handled=!0)}},hash:{execute:function(e){var o;if(typeof e.action=="string"&&e.action.charAt(0)==="#"){var s=e.action.substr(1),c=e.args[0],h=s,l=function(n){var i=t.data.utils.compileGetter(n),r=e.args[0].model;return i(r)},a=c.evaluate||l;h=s.replace(/\{([^}]+)\}/g,function(r,u){u=n.trim(u),u.indexOf(",")>-1&&(u=n.map(u.split(","),n.trim));var f=a(u);return f===i&&(f=""),f=t.framework.Route.prototype.formatSegment(f)}),o={},r(o,e),u(o.jQueryEvent),f.navigate(h,o),e.handled=!0}}}}}}(jQuery,DevExpress),function(n,t){var u=t.require("/class"),s=u.abstract,h=t.require("/eventsMixin"),c=t.require("/action"),l=t.require("/utils/utils.storage"),i=t.require("/utils/utils.common"),r=t.require("/framework/framework.errors"),f,a="InProgress",e="Inited",o=t.framework;t.framework.Application=u.inherit({ctor:function(i){i=i||{},this._options=i,this.namespace=i.namespace||window,this._applicationMode=i.mode?i.mode:"mobileApp",this.components=[],f=t.localization.localizeString("@Back"),this.router=i.router||new t.framework.Router;var r={mobileApp:t.framework.StackBasedNavigationManager,webSite:t.framework.HistoryBasedNavigationManager};this.navigationManager=i.navigationManager||new r[this._applicationMode]({keepPositionInStack:i.navigateToRootViewMode==="keepHistory"});this.navigationManager.on("navigating",n.proxy(this._onNavigating,this));this.navigationManager.on("navigatingBack",n.proxy(this._onNavigatingBack,this));this.navigationManager.on("navigated",n.proxy(this._onNavigated,this));this.navigationManager.on("navigationCanceled",n.proxy(this._onNavigationCanceled,this));this.stateManager=i.stateManager||new t.framework.StateManager({storage:i.stateStorage||l.sessionStorage()}),this.stateManager.addStateSource(this.navigationManager),this.viewCache=this._createViewCache(i),this.commandMapping=this._createCommandMapping(i.commandMapping),this.createNavigation(i.navigation),this._isNavigating=!1,this._viewLinksHash={},c.registerExecutor(t.framework.createActionExecutors(this)),this.components.push(this.router),this.components.push(this.navigationManager)},_createViewCache:function(i){var r;r=i.viewCache?i.viewCache:i.disableViewCache?new t.framework.NullViewCache:new t.framework.CapacityViewCacheDecorator({size:i.viewCacheSize,viewCache:new t.framework.ViewCache});r.on("viewRemoved",n.proxy(function(n){this._releaseViewLink(n.viewInfo)},this));return r},_createCommandMapping:function(n){var i=n;return n instanceof t.framework.CommandMapping||(i=new t.framework.CommandMapping,i.load(t.framework.CommandMapping.defaultMapping||{}).load(n||{})),i},createNavigation:function(n){this.navigation=this._createNavigationCommands(n),this._mapNavigationCommands(this.navigation,this.commandMapping)},_createNavigationCommands:function(t){if(!t)return[];var i=0;return n.map(t,function(t){var r;return r=t instanceof o.dxCommand?t:new o.dxCommand(n.extend({root:!0},t)),r.option("id")||r.option("id","navigation_"+i++),r})},_mapNavigationCommands:function(t,i){var r=n.map(t,function(n){return n.option("id")});i.mapCommands("global-navigation",r)},_callComponentMethod:function(t,i){var r=[];return n.each(this.components,function(u,f){if(f[t]&&n.isFunction(f[t])){var e=f[t](i);e&&e.done&&r.push(e)}}),n.when.apply(n,r)},init:function(){var n=this;return n._initState=a,n._callComponentMethod("init").done(function(){n._initState=e,n._processEvent("initialized")}).fail(function(n){throw n||r.Error("E3022");})},_onNavigatingBack:function(n){this._processEvent("navigatingBack",n)},_onNavigating:function(n){var t=this,f,u;if(t._isNavigating){t._pendingNavigationArgs=n,n.cancel=!0;return}if(t._isNavigating=!0,delete t._pendingNavigationArgs,f=this.router.parse(n.uri),!f)throw r.Error("E3001",n.uri);u=this.router.format(f),n.uri!==u&&u?(n.cancel=!0,n.cancelReason="redirect",i.executeAsync(function(){t.navigate(u,n.options)})):t._processEvent("navigating",n)},_onNavigated:function(n){var t=this,f=n.options.direction,u,r=t._acquireViewInfo(n.item,n.options);return r.model||(this._processEvent("beforeViewSetup",{viewInfo:r}),t._createViewModel(r),t._createViewCommands(r),this._processEvent("afterViewSetup",{viewInfo:r})),t._highlightCurrentNavigationCommand(r),u=t._showView(r,f).always(function(){t._isNavigating=!1;var n=t._pendingNavigationArgs;n&&i.executeAsync(function(){t.navigate(n.uri,n.options)})})},_isViewReadyToShow:function(n){return!!n.model},_onNavigationCanceled:function(n){var t=this,r;t._pendingNavigationArgs&&t._pendingNavigationArgs.uri===n.uri||(r=t.navigationManager.currentItem(),r&&i.executeAsync(function(){var i=t._acquireViewInfo(r,n.options);t._highlightCurrentNavigationCommand(i,!0)}),t._isNavigating=!1)},_disposeRemovedViews:function(){var t=this,i;n.each(t._viewLinksHash,function(n,r){r.linkCount||(i={viewInfo:r.viewInfo},t._processEvent("viewDisposing",i,i.viewInfo.model),t._disposeView(r.viewInfo),t._processEvent("viewDisposed",i,i.viewInfo.model),delete t._viewLinksHash[n])})},_onViewHidden:function(n){var t={viewInfo:n};this._processEvent("viewHidden",t,t.viewInfo.model)},_disposeView:function(t){var i=t.commands||[];n.each(i,function(n,t){t._dispose()})},_acquireViewInfo:function(n,t){var u=this.router.parse(n.uri),r=this._getViewInfoKey(n,u),i=this.viewCache.getView(r);return i?this._updateViewInfo(i,n,t):(i=this._createViewInfo(n,t),this._obtainViewLink(i),this.viewCache.setView(r,i)),i},_getViewInfoKey:function(n,t){var i={key:n.key,navigationItem:n,routeData:t};return this._processEvent("resolveViewCacheKey",i),i.key},_processEvent:function(n,t,i){this._callComponentMethod(n,t),this.fireEvent(n,t&&[t]);var r=(i||{})[n];r&&r.call(i,t)},_updateViewInfo:function(n,t,i){var r=t.uri,u=this.router.parse(r);n.viewName=u.view,n.routeData=u,n.uri=r,n.navigateOptions=i,n.canBack=this.canBack(i.stack),n.previousViewInfo=this._getPreviousViewInfo(i)},_createViewInfo:function(n,t){var r=n.uri,u=this.router.parse(r),i={key:this._getViewInfoKey(n,u)};return this._updateViewInfo(i,n,t),i},_createViewModel:function(n){n.model=n.model||this._callViewCodeBehind(n)},_createViewCommands:function(n){n.commands=n.model.commands||[],n.canBack&&this._applicationMode!=="webSite"&&this._appendBackCommand(n)},_callViewCodeBehind:function(t){var r=n.noop,i=t.routeData;return i.view in this.namespace&&(r=this.namespace[i.view]),r.call(this.namespace,i,t)||{}},_appendBackCommand:function(n){var i=n.commands,r=this,u=f,e,o;r._options.useViewTitleAsBackText&&(u=((n.previousViewInfo||{}).model||{}).title||u),e=[new t.framework.dxCommand({id:"back",title:u,behavior:"back",onExecute:function(){r.back({stack:n.navigateOptions.stack})},icon:"arrowleft",type:"back",renderStage:r._options.useViewTitleAsBackText?"onViewRendering":"onViewShown"})],o=t.framework.utils.mergeCommands(e,i),i.length=0,i.push.apply(i,o)},_showView:function(n,r){var u=this,f={viewInfo:n,direction:r,params:n.routeData};return t.data.utils.processRequestResultLock.obtain(),u._showViewImpl(f.viewInfo,f.direction).done(function(){i.executeAsync(function(){t.data.utils.processRequestResultLock.release(),u._processEvent("viewShown",f,n.model),u._disposeRemovedViews()})})},_highlightCurrentNavigationCommand:function(t,r){var e=this,u,f=t.model&&t.model.currentNavigationItemId;f!==undefined&&n.each(this.navigation,function(n,t){if(t.option("id")===f)return u=t,!1}),u||n.each(this.navigation,function(n,t){var r=t.option("onExecute");if(i.isString(r)&&(r=r.replace(/^#+/,""),r===e.navigationManager.rootUri()))return u=t,!1}),n.each(this.navigation,function(n,t){r&&t===u&&t.option("highlighted")&&t.fireEvent("optionChanged",[{name:"highlighted",value:!0,previousValue:!0}]),t.option("highlighted",t===u)})},_showViewImpl:s,_obtainViewLink:function(n){var t=n.key;this._viewLinksHash[t]?this._viewLinksHash[t].linkCount++:this._viewLinksHash[t]={viewInfo:n,linkCount:1}},_releaseViewLink:function(n){this._viewLinksHash[n.key].linkCount--},navigate:function(t,i){var u=this;if(n.isPlainObject(t)&&(t=u.router.format(t),t===!1))throw r.Error("E3002");if(u._initState)if(u._initState===e)(!u._isNavigating||t)&&u.navigationManager.navigate(t,i);else throw r.Error("E3003");else u.init().done(function(){u.restoreState(),u.navigate(t,i)})},canBack:function(n){return this.navigationManager.canBack(n)},_getPreviousViewInfo:function(n){var t=this.navigationManager.previousItem(n.stack),i,r;return t&&(r=this.router.parse(t.uri),i=this.viewCache.getView(this._getViewInfoKey(t,r))),i},back:function(n){this.navigationManager.back(n)},saveState:function(){this.stateManager.saveState()},restoreState:function(){this.stateManager.restoreState()},clearState:function(){this.stateManager.clearState()}}).include(h)}(jQuery,DevExpress),function(n,t){t.framework.html={layoutSets:{},animationSets:{"native":{"view-content-change":[{animation:"slide"},{animation:"ios7-slide",device:{platform:"ios"}},{animation:"none",device:{deviceType:"desktop",platform:"generic"}},{animation:"none",device:{grade:"C"}}],"view-header-toolbar":[{animation:"ios7-toolbar"},{animation:"slide",device:{grade:"B"}},{animation:"none",device:{grade:"C"}}]},"default":{"layout-change":[{animation:"none"},{animation:"ios7-slide",device:{platform:"ios"}},{animation:"pop",device:{platform:"android"}},{animation:"openDoor",device:{deviceType:"phone",platform:"win"}}],"view-content-change":[{animation:"slide"},{animation:"ios7-slide",device:{platform:"ios"}},{animation:"fade",device:{deviceType:"desktop",platform:"generic"}},{animation:"none",device:{grade:"C"}}],"view-content-rendered":[{animation:"fade"},{animation:"none",device:{grade:"C"}}],"view-header-toolbar":[{animation:"ios7-toolbar"},{animation:"slide",device:{grade:"B"}},{animation:"none",device:{grade:"C"}}],"command-rendered":[{animation:"stagger-fade-drop"},{animation:"fade",device:{grade:"B"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"list-item-rendered":[{animation:"stagger-3d-drop",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"detail-item-rendered":[{animation:"stagger-3d-drop",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"edit-item-rendered":[{animation:"stagger-3d-drop",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}]},slide:{"view-content-change":[{animation:"slide"},{animation:"ios7-slide",device:{platform:"ios"}},{animation:"fade",device:{deviceType:"desktop",platform:"generic"}},{animation:"none",device:{grade:"C"}}],"view-content-rendered":[{animation:"fade"},{animation:"none",device:{grade:"C"}}],"view-header-toolbar":[{animation:"ios7-toolbar"},{animation:"slide",device:{grade:"B"}},{animation:"none",device:{grade:"C"}}],"command-rendered":[{animation:"stagger-fade-drop"},{animation:"fade",device:{grade:"B"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"list-item-rendered":[{animation:"stagger-fade-slide",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"detail-item-rendered":[{animation:"stagger-fade-slide",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"edit-item-rendered":[{animation:"stagger-fade-slide",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}]},zoom:{"view-content-change":[{animation:"slide"},{animation:"ios7-slide",device:{platform:"ios"}},{animation:"fade",device:{deviceType:"desktop",platform:"generic"}},{animation:"none",device:{grade:"C"}}],"view-content-rendered":[{animation:"fade"},{animation:"none",device:{grade:"C"}}],"view-header-toolbar":[{animation:"ios7-toolbar"},{animation:"slide",device:{grade:"B"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"command-rendered":[{animation:"stagger-fade-zoom"},{animation:"fade",device:{grade:"B"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"list-item-rendered":[{animation:"stagger-fade-zoom",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"detail-item-rendered":[{animation:"stagger-fade-zoom",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}],"edit-item-rendered":[{animation:"stagger-fade-zoom",device:{grade:"A"}},{animation:"fade",device:{deviceType:"desktop"}},{animation:"none",device:{grade:"C"}}]}}}}(jQuery,DevExpress),function(n,t){var f=t.require("/class"),r=t.require("/utils/utils.publicComponent"),e=t.require("/ui/events/ui.events.remove"),u=f.inherit({ctor:function(t,i){this.NAME=this.constructor.publicName(),i=i||{},this._$element=n(t).one(e.name,n.proxy(function(){this._dispose()},this)),r.attachInstanceToElement(this._$element,this.NAME,this),i.fromCache?this._options=i:(this._options={},this._setDefaultOptions(),i&&this.option(i),this._render())},_setDefaultOptions:n.noop,_render:n.noop,_dispose:n.noop,element:function(){return this._$element},option:function(t,i){if(arguments.length===0)return this._options;if(arguments.length===1){if(typeof t=="string")return this._options[t];i=t,n.extend(this._options,i)}else this._options[t]=i},instance:function(){return this}});u.publicName=r.getName,u.getInstance=function(n){return r.getInstanceByElement(n,this.publicName())},n.extend(t.framework.html,{MarkupComponent:u})}(jQuery,DevExpress),function(n,t){var o=DevExpress.require("/class"),e=t.framework.utils.commandToContainer,s="dxCommandToWidgetAdapter",i=o.inherit({ctor:function(n,t){this.command=n,this.widgetItem=this._createWidgetItem(n,t)},_createWidgetItem:function(t,i){var r=n.extend({},i,t.option()),f=function(n){t.execute(n)},u;return r.text=e.resolveTextValue(t,i),r.icon=e.resolveIconValue(t,i),r.type=e.resolvePropertyValue(t,i,"type"),r.location=e.resolvePropertyValue(t,i,"location"),u=this._createWidgetItemCore(r,f),u.command=t,u},_createWidgetItemCore:function(n){return n},dispose:function(){delete this.command,delete this.widgetItem}}),r=o.inherit({ctor:function(i){this._commandToWidgetItemOptionNames={},this.$widgetElement=i,this.$widgetElement.data(s,this),this.widget=this._getWidgetByElement(i),this._widgetWidgetContentReadyHandler=n.proxy(this._onWidgetContentReady,this),this._widgetWidgetItemRenderedHandler=n.proxy(this._onWidgetItemRendered,this),this._widgetDisposingHandler=n.proxy(this._onWidgetDisposing,this);this.widget.on("itemRendered",this._widgetWidgetItemRenderedHandler);this.widget.on("contentReady",this._widgetWidgetContentReadyHandler);this.widget.on("disposing",this._widgetDisposingHandler);this.itemWrappers=[],this._transitionExecutor=new t.TransitionExecutor},addCommand:function(t,i){var r=this._createItemWrapper(t,i);this.itemWrappers.push(r),this._addItemToWidget(r),this._commandChangedHandler=n.proxy(this._onCommandChanged,this);r.command.on("optionChanged",this._commandChangedHandler)},beginUpdate:function(){this.widget.beginUpdate()},endUpdate:function(){return this.widget.endUpdate(),this.animationDeferred},_onWidgetItemRendered:function(n){n.itemData.isJustAdded&&n.itemData.command&&n.itemData.command.option("visible")&&this._commandRenderedAnimation&&(this._transitionExecutor.enter(n.itemElement,this._commandRenderedAnimation),delete n.itemData.isJustAdded)},_onWidgetContentReady:function(){this.animationDeferred=this._transitionExecutor.start()},_onWidgetDisposing:function(){this.dispose(!0)},_setWidgetItemOption:function(t,i,r){var e=this.widget.option("items"),f=n.inArray(r,n.map(e,function(n){return n.command||{}})),u;f>-1&&(u="items["+f+"].",t!=="visible"&&t!=="location"&&this.widget.option("items["+f+"]").options&&(u+="options."),u+=this._commandToWidgetItemOptionNames[t]||t,this.widget.option(u,i))},_onCommandChanged:function(n){n.name!=="highlighted"&&this._setWidgetItemOption(n.name,n.value,n.component)},_addItemToWidget:function(n){var t=this.widget.option("items");t.push(n.widgetItem),this.widget.element().is(":visible")&&(n.widgetItem.isJustAdded=!0),this.widget.option("items",t)},refresh:function(){var n=this.widget.option("items");this.widget.option("items",n)},clear:function(t){var i=this;n.each(i.itemWrappers,function(n,t){t.command.off("optionChanged",i._commandChangedHandler),t.dispose()}),this.itemWrappers.length=0,t||this._clearWidgetItems()},_clearWidgetItems:function(){this.widget.option("items",[])},dispose:function(n){this.clear(n),this.widget&&(this.widget.off("itemRendered",this._widgetWidgetItemRenderedHandler),this.widget.off("contentReady",this._widgetContentReadyHandler),this.widget.off("disposing",this._widgetDisposingHandler),this.$widgetElement.removeData(s),delete this.widget,delete this.$widgetElement)}}),u=o.inherit({ctor:function(n){this.createAdapter=n},_getWidgetAdapter:function(n){var t=n.data(s);return t||(t=this.createAdapter(n)),t},addCommand:function(n,t,i){var r=this._getWidgetAdapter(n);r.addCommand(t,i)},clearContainer:function(n){var t=this._getWidgetAdapter(n);t.clear()},beginUpdate:function(n){var t=this._getWidgetAdapter(n);t.beginUpdate()},endUpdate:function(n){var t=this._getWidgetAdapter(n);return t.endUpdate()}}),h=i.inherit({_createWidgetItemCore:function(n,t){var i;return n.onClick=t,n.location==="menu"?i=n:(i={location:n.location,visible:n.visible,options:n,widget:"button"},n.visible=!0,delete n.location),i}}),c=r.inherit({ctor:function(n){this.callBase(n),this._commandToWidgetItemOptionNames={title:"text"},this._commandRenderedAnimation="command-rendered"},_getWidgetByElement:function(n){return n.dxToolbar("instance")},_createItemWrapper:function(n,t){return new h(n,t)},addCommand:function(n,t){this.widget.option("visible",!0),this.callBase(n,t)}}),l=i.inherit({_createWidgetItemCore:function(n,t){return n.title=n.text,n.onClick=t,n}}),a=r.inherit({_createItemWrapper:function(n,t){return new l(n,t)},_getWidgetByElement:function(n){return n.dxList("instance")}}),v=i.inherit({}),y=r.inherit({ctor:function(t){this.callBase(t),this._commandToWidgetItemOptionNames={title:"text"},this.widget.option("onItemClick",n.proxy(this._onNavBarItemClick,this))},_onNavBarItemClick:function(n){for(var i=this.widget.option("items"),t=i.length;--t;)i[t].command.option("highlighted",!1);n.itemData.command.execute(n)},_getWidgetByElement:function(n){return n.dxNavBar("instance")},_createItemWrapper:function(n,t){return new v(n,t)},addCommand:function(n,t){this.callBase(n,t),this._updateSelectedIndex()},_onCommandChanged:function(n){var t=n.name,i=n.value;t==="highlighted"&&i&&this._updateSelectedIndex(),this.callBase(n)},_updateSelectedIndex:function(){for(var i=this.widget.option("items"),t,n=0,r=i.length;n<r;n++)if(t=i[n].command,t&&t.option("highlighted")){this.widget.option("selectedIndex",n);break}}}),p=i.inherit({_createWidgetItemCore:function(n){return n.title=n.text,n}}),w=r.inherit({ctor:function(t){this.callBase(t),this.widget.option("onSelectionChanged",n.proxy(this._onPivotSelectionChange,this))},_onPivotSelectionChange:function(n){n.addedItems.length&&n.removedItems.length&&n.addedItems[0]&&n.addedItems[0].command&&n.addedItems[0].command.execute(n)},_getWidgetByElement:function(n){return n.dxPivot("instance")},_createItemWrapper:function(n,t){return new p(n,t)},addCommand:function(n,t){this.callBase(n,t),this._updateSelectedIndex()},_onCommandChanged:function(n){var t=n.name,i=n.value;t==="visible"?this._rerenderPivot():t==="highlighted"&&i&&this._updateSelectedIndex(),this.callBase(n)},_addItemToWidget:function(n){n.command.option("visible")&&this.callBase(n)},_updateSelectedIndex:function(){var r=this.widget,u=r.option("items")||[],n,f,i;for(t.fx.off=!0,n=0,f=u.length;n<f;n++)if(i=u[n].command,i&&i.option("highlighted")){r.option("selectedIndex",n);break}t.fx.off=!1},_rerenderPivot:function(){var t=this;t.widget.option("items",[]),n.each(t.itemWrappers,function(n,i){i.command.option("visible")&&t._addItemToWidget(i)}),t.refresh(),t._updateSelectedIndex()}}),b=i.inherit({}),k=r.inherit({ctor:function(t){this.callBase(t),this._commandToWidgetItemOptionNames={title:"text"},this.widget.option("onItemClick",n.proxy(this._onSlideOutItemClick,this))},_onSlideOutItemClick:function(n){n.itemData.command.execute(n)},_getWidgetByElement:function(n){return n.dxSlideOut("instance")},_createItemWrapper:function(n,t){return new b(n,t)},_updateSelectedIndex:function(){for(var i=this.widget.option("items")||[],t,n=0,r=i.length;n<r;n++)if(t=i[n].command,t&&t.option("highlighted")){this.widget.option("selectedIndex",n);break}},addCommand:function(n,t){this.callBase(n,t),this._updateSelectedIndex()},_onCommandChanged:function(n){var t=n.name,i=n.value;t==="highlighted"&&i&&this._updateSelectedIndex(),this.callBase(n)}}),f=t.framework.html.commandToDXWidgetAdapters={};f.dxToolbar=new u(function(n){return new c(n)}),f.dxList=new u(function(n){return new a(n)}),f.dxNavBar=new u(function(n){return new y(n)}),f.dxPivot=new u(function(n){return new w(n)}),f.dxSlideOut=new u(function(n){return new k(n)})}(jQuery,DevExpress),function(n,t){var u=DevExpress.require("/class"),r=DevExpress.require("/framework/framework.errors"),f=t.require("/componentRegistrator"),e=t.framework.html.MarkupComponent.inherit({ctor:function(t,i){n.isPlainObject(t)&&(i=t,t=n("<div />")),this.callBase(t,i)},_setDefaultOptions:function(){this.callBase(),this.option({id:null})},_render:function(){this.callBase(),this.element().addClass("dx-command-container")}});f("dxCommandContainer",t.framework,e),t.framework.html.CommandManager=u.inherit({ctor:function(n){n=n||{},this.defaultWidgetAdapter=n.defaultWidgetAdapter||this._getDefaultWidgetAdapter(),this.commandMapping=n.commandMapping||new t.framework.CommandMapping},_getDefaultWidgetAdapter:function(){return{addCommand:n.noop,clearContainer:n.noop}},_getContainerAdapter:function(n){var i=n.data("dxComponents"),u=t.framework.html.commandToDXWidgetAdapters,f,r;if(i)for(f in i)if(r=i[f],r in u)return u[r];return this.defaultWidgetAdapter},findCommands:function(t){return n.map(t.addBack().find(".dx-command"),function(t){return n(t).dxCommand("instance")})},findCommandContainers:function(t){return n.map(t.find(".dx-command-container"),function(t){return n(t).dxCommandContainer("instance")})},_checkCommandId:function(n,t){if(n===null)throw r.Error("E3010",t.element().get(0).outerHTML);},renderCommandsToContainers:function(t,i){var r=this,u={},f=[],e=[];return n.each(t,function(n,t){var i=t.option("id");r._checkCommandId(i,t),f.push(i),u[i]=t}),r.commandMapping.checkCommandsExist(f),n.each(i,function(t,i){var f=[],o;n.each(u,function(n,t){var e=n,u=r.commandMapping.getCommandMappingForContainer(e,i.option("id"));u&&f.push({command:t,options:u})}),f.length&&(o=r._attachCommandsToContainer(i.element(),f),o&&e.push(o))}),n.when.apply(n,e)},clearContainer:function(n){var t=n.element(),i=this._getContainerAdapter(t);i.clearContainer(t)},_arrangeCommandsToContainers:function(n,t){r.log("W0002","CommandManager","_arrangeCommandsToContainers","14.1","Use the 'renderCommandsToContainers' method instead."),this.renderCommandsToContainers(n,t)},_attachCommandsToContainer:function(t,i){var r=this._getContainerAdapter(t),u;return r.beginUpdate&&r.beginUpdate(t),n.each(i,function(n,i){r.addCommand(t,i.command,i.options)}),r.endUpdate&&(u=r.endUpdate(t)),u}})}(jQuery,DevExpress),function(n,t,i){var l=DevExpress.require("/class"),a=t.require("/eventsMixin"),v=DevExpress.require("/framework/framework.errors"),y=t.require("/utils/utils.common"),f=t.require("/utils/utils.dom"),r="__hidden-bag",e=".dx-transition:not(.dx-transition .dx-transition)",p=".dx-content",o="onViewShown",s="dxcontentrendered.layoutController",h=".dx-pending-rendering",c=".dx-pending-rendering-manual",w=function(n){return".dx-transition-"+n},u;t.framework.html.DefaultLayoutController=l.inherit({ctor:function(n){n=n||{},this.name=n.name||"",this._layoutModel=n.layoutModel||{},this._defaultPaneName=n.defaultPaneName||"content",this._transitionDuration=n.transitionDuration===i?400:n.transitionDuration},init:function(i){i=i||{},this._visibleViews={},this._$viewPort=i.$viewPort||n("body"),this._commandManager=i.commandManager,this._viewEngine=i.viewEngine,this.transitionExecutor=new t.TransitionExecutor,this._prepareTemplates(),this._$viewPort.append(this.element()),this._hideElements(this.element()),i.templateContext&&(this._templateContext=i.templateContext,this._proxiedTemplateContextChangedHandler=n.proxy(this._templateContextChangedHandler,this))},activate:function(){if(this._disabledState)return this._disabledState=!1,this._notifyShowing(),n.Deferred().resolve().promise();var t=this.element();return this._showElements(t),this._attachRefreshViewRequiredHandler(),n.Deferred().resolve().promise()},deactivate:function(){return this._disabledState=!1,this._releaseVisibleViews(),this._hideElements(this.element()),this._detachRefreshViewRequiredHandler(),n.Deferred().resolve().promise()},disable:function(){this._disabledState=!0,this._notifyHidden()},activeViewInfo:function(){return this._visibleViews[this._defaultPaneName]},_notifyShowing:function(){var t=this;n.each(this._visibleViews,function(n,i){t.fireEvent("viewShowing",[i])})},_notifyHidden:function(){var t=this;n.each(this._visibleViews,function(n,i){t.fireEvent("viewHidden",[i])})},_applyTemplate:function(n,i){n.each(function(n,r){t.framework.templateProvider.applyTemplate(r,i)})},_releaseVisibleViews:function(){var t=this;n.each(this._visibleViews,function(n,i){t._hideView(i),t._releaseView(i)}),this._visibleViews={}},_templateContextChangedHandler:function(){n.each(this._visibleViews,n.proxy(function(n,t){this.showView(t)},this))},_attachRefreshViewRequiredHandler:function(){if(this._templateContext)this._templateContext.on("optionChanged",this._proxiedTemplateContextChangedHandler)},_detachRefreshViewRequiredHandler:function(){this._templateContextChanged&&this._templateContext.off("optionChanged",this._proxiedTemplateContextChangedHandler)},_getPreviousViewInfo:function(n){return this._visibleViews[this._getViewPaneName(n.viewTemplateInfo)]},_prepareTemplates:function(){var n=this,t=n._viewEngine.getLayoutTemplate(this._getLayoutTemplateName());n._$layoutTemplate=t,n._$mainLayout=n._createEmptyLayout(),n._showElements(n._$mainLayout),n._applyTemplate(n._$mainLayout,n._layoutModel),n._$navigationWidget=n._createNavigationWidget()},renderNavigation:function(n){this._clearNavigationWidget(),this._renderNavigationImpl(n)},_renderNavigationImpl:function(n){this._renderCommands(this._$mainLayout,n)},_createNavigationWidget:function(){var i=this._findCommandContainers(this._$mainLayout),t;return n.each(i,function(n,i){if(i.option("id")==="global-navigation")return t=i.element(),!1}),t},_clearNavigationWidget:function(){this._$navigationWidget&&this._commandManager.clearContainer(this._$navigationWidget.dxCommandContainer("instance"))},element:function(){return this._$mainLayout},_getViewFrame:function(){return this._$mainLayout},_getLayoutTemplateName:function(){return this.name},_applyModelToTransitionElements:function(t,i){var r=this;this._getTransitionElements(t).each(function(t,u){r._applyTemplate(n(u).children(),i)})},_createViewLayoutTemplate:function(){var t=this,n=t._$layoutTemplate.clone();return this._hideElements(n),n},_createEmptyLayout:function(){var t=this,n=t._$layoutTemplate.clone();return this._hideElements(n),this._getTransitionElements(n).empty(),n.children(p).remove(),n},_getTransitionElements:function(n){return n.find(e).addBack(e)},showView:function(t,r){r=r||"forward";var u=this,f=u._getPreviousViewInfo(t),e=f===t?f.currentViewTemplateId:i;return(this._defineCurrentViewTemplateId(t),e&&e===t.currentViewTemplateId&&t===f)?n.Deferred().resolve().promise():(u._ensureViewRendered(t),u.fireEvent("viewShowing",[t,r]),this._showViewImpl(t,r,e).done(function(){u._onViewShown(t)}))},disposeView:function(n){this._clearRenderResult(n)},_clearRenderResult:function(n){n.renderResult&&(n.renderResult.$markup.remove(),n.renderResult.$viewItems.remove(),delete n.renderResult)},_prepareViewTemplate:function(){},_renderViewImpl:function(t,i){var s=this,e=".dx-command,.dx-content,script",u=this._createViewLayoutTemplate(),f,o=!0,r=n();if(t.children(e).length===0&&this._viewEngine._wrapViewDefaultContent(t),f=t.children(),this._applyModelToTransitionElements(u,i.model),this._viewEngine.applyLayout(t,u),f.each(function(t,u){var f=n(u);s._applyTemplate(f,i.model),f.is(e)?o=!1:r=r.add(f)}),r.length&&!o)throw v.Error("E3014",r[0].outerHTML);i.renderResult=i.renderResult||{},i.renderResult.$viewItems=f,i.renderResult.$markup=u},_renderCommands:function(n,t){var i=this._findCommandContainers(n);return this._commandManager.renderCommandsToContainers(t,i)},_prepareViewCommands:function(i){var u=i.renderResult.$viewItems,f=this._commandManager.findCommands(u),r={};i.commands=t.framework.utils.mergeCommands(i.commands||[],f),i.commandsToRenderMap=r,n.each(i.commands,function(n,t){var i=t.option("renderStage")||o,u=r[i]=r[i]||[];u.push(t)})},_applyViewCommands:function(t,i){i=i||o;var u=t.commandsToRenderMap[i],f=t.renderResult.$markup,r;return u?(r=this._renderCommands(f,u),delete t.commandsToRenderMap[i]):r=n.Deferred().resolve().promise(),r},_findCommandContainers:function(n){return f.createComponents(n,["dxCommandContainer"])},_defineCurrentViewTemplateId:function(n){var t=n.$viewTemplate?n.$viewTemplate.dxView("instance"):this._viewEngine.getViewTemplateInfo(n.viewName),i=t.getId();n.currentViewTemplateId=i},_ensureViewRendered:function(n){var t=n.renderResult&&n.renderResult.markupCache[n.currentViewTemplateId];t?n.renderResult.$markup=t:(this._renderView(n),n.renderResult.markupCache=n.renderResult.markupCache||{},n.renderResult.markupCache[n.currentViewTemplateId]=n.renderResult.$markup)},_renderView:function(n){var t=n.$viewTemplate||this._viewEngine.getViewTemplate(n.viewName);this._prepareViewTemplate(t,n),this._renderViewImpl(t,n),this._prepareViewCommands(n),this._applyViewCommands(n,"onViewRendering"),this._appendViewToLayout(n),t.remove(),this._onRenderComplete(n),this.fireEvent("viewRendered",[n])},_appendViewToLayout:function(i){var r=this,s=r._getViewFrame(i),u=i.renderResult.$markup,e=n(),o=[];n.each(u.find(".dx-content-placeholder"),function(i,r){t.framework.prepareTransition(n(r),n(r).attr("data-dx-content-placeholder-name"))}),n.each(r._getTransitionElements(s),function(t,i){var h=n(i),s=u.find(w(h.attr("data-dx-transition-name"))).children(),c={$element:s,animation:h.attr("data-dx-transition-type")};o.push(c),h.append(s),r._showViewElements(s),f.triggerShownEvent(s),e=e.add(s)}),r._$mainLayout.append(i.renderResult.$viewItems.filter(".dx-command")),u.remove(),i.renderResult.$markup=e,i.renderResult.animationItems=o},_onRenderComplete:function(){},_onViewShown:function(){n(document).trigger("dx.viewchanged")},_enter:function(t,i){var r=this.transitionExecutor;n.each(t,function(n,t){r.enter(t.$element,t.animation,i)})},_leave:function(t,i){var r=this.transitionExecutor;n.each(t,function(n,t){r.leave(t.$element,t.animation,i)})},_doTransition:function(n,t,i){return n&&this._leave(n.renderResult.animationItems,i),this._enter(t.renderResult.animationItems,i),this._showView(t),this.transitionExecutor.start()},_showViewImpl:function(n,t,r){var f=this,e,u=this._getPreviousViewInfo(n),o={direction:t};return u===n&&(u=i),u||(o.duration=0),e=f._doTransition(u,n,o).then(function(){return f._changeView(n,r)})},_releaseView:function(n){this.fireEvent("viewReleased",[n])},_getReadyForRenderDeferredItems:function(){return n.Deferred().resolve().promise()},_changeView:function(n,t){var i=this,r;return t?i._hideView(n,t):(r=i._getPreviousViewInfo(n),r&&r!==n&&(i._hideView(r),i._releaseView(r)),this._visibleViews[this._getViewPaneName(n.viewTemplateInfo)]=n),this._subscribeToDeferredItems(n),this._getReadyForRenderDeferredItems(n).then(function(){return i._applyViewCommands(n)}).then(function(){return i._renderDeferredItems(n.renderResult.$markup)})},_subscribeToDeferredItems:function(t){var i=this,r=t.renderResult.$markup;r.find(h).add(r.filter(h)).each(function(){var r={viewInfo:t,context:i};n(this).on(s,r,i._onDeferredContentRendered)})},_onDeferredContentRendered:function(t){var i=n(t.target),u=t.data.viewInfo,r=t.data.context;i.off(s,r._onDeferredContentRendered),r._renderCommands(i,u.commands)},_renderDeferredItems:function(t){var f=this,i=n.Deferred(),r=t.find(c).add(t.filter(c)).first(),u;return r.length?(u=r.data("dx-render-delegate"),y.executeAsync(function(){u().then(function(){return f._renderDeferredItems(t)}).then(function(){i.resolve()})})):i.resolve(),i.promise()},_getViewPaneName:function(){return this._defaultPaneName},_hideElements:function(n){n.addClass("dx-fast-hidden")},_showElements:function(n){n.removeClass("dx-fast-hidden")},_hideViewElements:function(n){this._patchIDs(n),this._disableInputs(n),n.removeClass("dx-active-view").addClass("dx-inactive-view")},_hideView:function(n,t){if(n.renderResult){var r=t===i?n.renderResult.$markup:n.renderResult.markupCache[t];this._hideViewElements(r),this.fireEvent("viewHidden",[n])}},_showViewElements:function(n){this._unpatchIDs(n),this._enableInputs(n),n.removeClass("dx-inactive-view").addClass("dx-active-view"),this._skipAnimation(n)},_showView:function(n){n.renderResult&&this._showViewElements(n.renderResult.$markup)},_skipAnimation:function(n){n.addClass("dx-skip-animation");for(var t=0;t<n.length;t++)n.eq(t).css("transform");n.removeClass("dx-skip-animation")},_patchIDs:function(n){this._processIDs(n,function(n){var t=n;return n.indexOf(r)===-1&&(t=r+"-"+n),t})},_unpatchIDs:function(n){this._processIDs(n,function(n){var t=n;return n.indexOf(r)===0&&(t=n.substr(r.length+1)),t})},_processIDs:function(t,i){var r=t.find("[id]");n.each(r,function(t,r){var u=n(r),f=u.attr("id");u.attr("id",i(f))})},_enableInputs:function(t){var i=t.find(":input[data-disabled=true]");n.each(i,function(t,i){n(i).removeAttr("disabled").removeAttr("data-disabled")})},_disableInputs:function(t){var i=t.find(":input:not([disabled], [disabled=true])");n.each(i,function(t,i){n(i).attr({disabled:!0,"data-disabled":!0})})}}).include(a),u=t.framework.html.layoutSets,u["default"]=u["default"]||[],u["default"].push({controller:new t.framework.html.DefaultLayoutController})}(jQuery,DevExpress),function(n,t,i){var v=DevExpress.require("/class"),s=DevExpress.require("/framework/framework.errors"),u=t.require("/utils/utils.dom"),y=t.require("/utils/utils.common"),f=t.require("/componentRegistrator"),r=t.framework,e=t.framework.html.MarkupComponent,c="MarkupTemplate:",o="dxView",h="dxLayout",l,a;f(o,r,e.inherit({_setDefaultOptions:function(){this.callBase(),this.option({name:null,title:null})},ctor:function(){this._id=u.uniqueId(),this.callBase.apply(this,arguments)},_render:function(){this.callBase(),this.element().addClass("dx-view"),this.element().attr("dx-data-template-id",this._id)},getId:function(){return this._id}}),r),f(h,r,e.inherit({_setDefaultOptions:function(){this.callBase(),this.option({name:null})},_render:function(){this.callBase(),this.element().addClass("dx-layout")}})),f("dxViewPlaceholder",r,e.inherit({_setDefaultOptions:function(){this.callBase(),this.option({viewName:null})},_render:function(){this.callBase(),this.element().addClass("dx-view-placeholder")}})),l=function(n,t,i,r){r==="absolute"?n.addClass("dx-transition-absolute"):n.addClass("dx-transition-static"),n.addClass("dx-transition").addClass("dx-transition-"+i).addClass("dx-transition-"+t).attr("data-dx-transition-type",t).attr("data-dx-transition-name",i)},a=function(n){n.addClass("dx-transition-inner-wrapper")},f("dxTransition",r,e.inherit({_setDefaultOptions:function(){this.callBase(),this.option({name:null,type:i,animation:"slide"})},_render:function(){this.callBase();var n=this.element();l(n,this.option("type")||this.option("animation"),this.option("name"),"absolute"),n.wrapInner("<div/>"),a(n.children())},_clean:function(){this.callBase(),this.element().empty()}})),t.framework.prepareTransition=function(n,t){n.children(".dx-content").length===0&&(n.wrapInner("<div>"),n.children().dxContent({targetPlaceholder:t}))},f("dxContentPlaceholder",r,e.inherit({_setDefaultOptions:function(){this.callBase(),this.option({name:null,transition:i,animation:"none",contentCssPosition:"absolute"})},_render:function(){this.callBase();var n=this.element();n.addClass("dx-content-placeholder").addClass("dx-content-placeholder-"+this.option("name")),n.attr("data-dx-content-placeholder-name",this.option("name")),l(n,this.option("transition")||this.option("animation"),this.option("name"),this.option("contentCssPosition"))},prepareTransition:function(){t.framework.prepareTransition(this.element(),this.option("name"))}})),f("dxContent",r,e.inherit({_setDefaultOptions:function(){this.callBase(),this.option({targetPlaceholder:null})},_optionChanged:function(){this._refresh()},_clean:function(){this.callBase(),this.element().removeClass(this._currentClass)},_render:function(){this.callBase();var n=this.element();n.addClass("dx-content"),this._currentClass="dx-content-"+this.option("targetPlaceholder"),n.attr("data-dx-target-placeholder-id",this.option("targetPlaceholder")),n.addClass(this._currentClass),a(n)}})),r.html.ViewEngine=v.inherit({ctor:function(t){t=t||{},this.$root=t.$root,this.device=t.device||{},this.dataOptionsAttributeName=t.dataOptionsAttributeName||"data-options",this._templateMap={},this._pendingViewContainer=null,this.markupLoaded=n.Callbacks(),this._templateContext=t.templateContext,this._$skippedMarkup=n(),t.templatesVersion!==i&&t.templateCacheStorage&&(this._templateCacheEnabled=!0,this._templatesVersion="v_"+t.templatesVersion,this._templateCacheStorage=t.templateCacheStorage,this._templateCacheKey="dxTemplateCache_"+DevExpress.VERSION+"_"+JSON.stringify(this.device))},_enumerateTemplates:function(t){var i=this;n.each(i._templateMap,function(i,r){n.each(r,function(i,r){n.each(r,function(n,i){t(i)})})})},_findComponent:function(n,t){var i=(this._templateMap[n]||{})[t]||[],r=this._templateContext&&this._templateContext.option()||{};return i=this._filterTemplates(r,i),this._checkMatchedTemplates(i),i[0]},_findTemplate:function(n,t){var i=this._findComponent(n,t),r,f;if(!i)throw s.Error("E3013",t,n);return r=i.element(),i._isStaticComponentsCreated||(u.createComponents(r,["dxContent","dxContentPlaceholder","dxTransition"]),i._isStaticComponentsCreated=!0),f=r.clone().removeClass("dx-hidden")},_loadTemplatesFromMarkupCore:function(t){var i=this,f,r;if(t.find("[data-dx-role]").length)throw s.Error("E3019");i.markupLoaded.fire({markup:t}),f=u.createComponents(t,[o,h]),n.each(f,function(n,t){var r=t.element();r.addClass("dx-hidden"),i._registerTemplateComponent(t),t.element().detach()}),r=t.filter("script"),r.appendTo(i.$root),i._$skippedMarkup=i._$skippedMarkup.add(r)},_registerTemplateComponent:function(n){var i=n.NAME,u=n.option(),r=u.name,t=this._templateMap[r]||{};t[i]=t[i]||[],t[i].push(n),this._templateMap[r]=t},_applyPartialViews:function(t){var i=this;u.createComponents(t,["dxViewPlaceholder"]),n.each(t.find(".dx-view-placeholder"),function(){var r=n(this),u,t;r.children().length||(u=r.data("dxViewPlaceholder").option("viewName"),t=i._findTemplate(u,o),i._applyPartialViews(t),r.append(t),t.removeClass("dx-hidden"))})},_ajaxImpl:function(){return n.ajax.apply(n,arguments)},_loadTemplatesFromURL:function(t){var f=this,r=this._getLoadOptions(),i=n.Deferred();return t=r.winPhonePrefix+t,this._ajaxImpl({url:t,isLocal:r.isLocal,dataType:"html"}).done(function(n){f._loadTemplatesFromMarkupCore(u.createMarkupFromString(n)),i.resolve()}).fail(function(n,r,u){var f=s.Error("E3021",t,u);i.reject(f)}),i.promise()},_getLoadOptions:function(){return location.protocol.indexOf("wmapp")>=0?{winPhonePrefix:location.protocol+"www/",isLocal:!0}:{winPhonePrefix:"",isLocal:i}},_loadExternalTemplates:function(){var t=[],i=this;return n("head").find("link[rel='dx-template']").each(function(r,u){var f=i._loadTemplatesFromURL(n(u).attr("href"));t.push(f)}),n.when.apply(n,t)},_processTemplates:function(){var t=this;n.each(t._templateMap,function(i,r){n.each(r,function(n,i){t._filterTemplatesByDevice(i)})}),t._enumerateTemplates(function(n){t._applyPartialViews(n.element())})},_filterTemplatesByDevice:function(t){var i=this._filterTemplates(this.device,t);n.each(t,function(t,r){n.inArray(r,i)<0&&r.element().remove()}),t.length=0,t.push.apply(t,i)},_filterTemplates:function(n,t){return y.findBestMatches(n,t,function(n){return n.option()})},_checkMatchedTemplates:function(t){if(t.length>1){var i="";n.each(t,function(n,t){i+=t.element().attr("data-options")+"\r\n"});throw s.Error("E3020",i,JSON.stringify(this.device));}},_wrapViewDefaultContent:function(n){n.wrapInner('<div class="dx-full-height"><\/div>'),n.children().eq(0).dxContent({targetPlaceholder:"content"})},_initDefaultLayout:function(){this._$defaultLayoutTemplate=n('<div class="dx-full-height" data-options="dxLayout : { name: \'default\' } "> \n    <div class="dx-full-height" data-options="dxContentPlaceholder : { name: \'content\' } " ><\/div> \n<\/div>'),u.createComponents(this._$defaultLayoutTemplate)},_getDefaultLayoutTemplate:function(){return this._$defaultLayoutTemplate.clone()},applyLayout:function(t,r){(r===i||r.length===0)&&(r=this._getDefaultLayoutTemplate()),t.children(".dx-content").length===0&&this._wrapViewDefaultContent(t);var u=n().add(r).add(t),f=u.find(".dx-content");return n.each(f,function(){var t=n(this),r=t.attr("data-dx-target-placeholder-id"),i=u.find(".dx-content-placeholder-"+r);i.empty(),i.append(t)}),f.filter(":not(.dx-content-placeholder .dx-content)").remove(),r},_loadTemplatesFromCache:function(){var t,r,i,u;if(this._templateCacheEnabled){if(r=function(t,i){if(typeof i=="string"&&i.indexOf(c)===0){var r=JSON.parse(i.substr(c.length)),u=r.type,f=r.options,e=n(r.markup);return f.fromCache=!0,e[u](f)[u]("instance")}return t==="skippedMarkup"?n("<div>").append(n(i)).contents():i},i=this._templateCacheStorage.getItem(this._templateCacheKey),i)try{u=JSON.parse(i,r),t=u[this._templatesVersion]}catch(f){this._templateCacheStorage.removeItem(this._templateCacheKey)}if(t)return this._templateMap=t.templates,this.$root.append(t.skippedMarkup),!0}},_putTemplatesToCache:function(){if(this._templateCacheEnabled){var i=function(t,i){return i&&i.element?c+JSON.stringify({markup:i.element().prop("outerHTML"),options:i.option(),type:i.NAME}):t==="skippedMarkup"?n("<div>").append(i.clone()).html():i},t={};t[this._templatesVersion]={templates:this._templateMap,skippedMarkup:this._$skippedMarkup},this._templateCacheStorage.setItem(this._templateCacheKey,JSON.stringify(t,i,4))}},init:function(){var t=this;return this._initDefaultLayout(),this._loadTemplatesFromCache()?n.Deferred().resolve().promise():(t._loadTemplatesFromMarkupCore(t.$root.children()),this._loadExternalTemplates().done(function(){t._processTemplates(),t._putTemplatesToCache()}))},getViewTemplate:function(n){return this._findTemplate(n,o)},getViewTemplateInfo:function(n){return this._findComponent(n,o)},getLayoutTemplate:function(n){return n?this._findTemplate(n,h):this._getDefaultLayoutTemplate()},getLayoutTemplateInfo:function(n){return this._findComponent(n,h)},loadTemplates:function(t){var i;return typeof t=="string"?i=this._loadTemplatesFromURL(t):(this._loadTemplatesFromMarkupCore(t),i=n.Deferred().resolve().promise()),i.done(n.proxy(this._processTemplates,this))}})}(jQuery,DevExpress),function(n,t,i){var c=t.require("/component"),r=t.require("/framework/framework.errors"),l=t.require("/utils/utils.viewPort").value,a=t.require("/utils/utils.object"),v=t.require("/utils/utils.dom"),f=t.require("/utils/utils.common"),u=t.require("/devices"),y=t.require("/ui/events/ui.events.emitter.feedback"),e=t.framework,o=e.html,s="dx-viewport",h="layout-change";o.HtmlApplication=e.Application.inherit({ctor:function(i){i=i||{},this.callBase(i),this._$root=n(i.rootNode||document.body),this._initViewport(i.viewPort),this._applicationMode==="mobileApp"&&v.initMobileViewport(i.viewPort),this.device=i.device||u.current(),this.commandManager=i.commandManager||new t.framework.html.CommandManager({commandMapping:this.commandMapping}),this._initTemplateContext(),this.viewEngine=i.viewEngine||new o.ViewEngine({$root:this._$root,device:this.device,templateCacheStorage:i.templateCacheStorage||window.localStorage,templatesVersion:i.templatesVersion,templateContext:this._templateContext}),this.components.push(this.viewEngine),this._initMarkupFilters(this.viewEngine),this._layoutSet=i.layoutSet||t.framework.html.layoutSets["default"],this._animationSet=i.animationSet||t.framework.html.animationSets["default"],this._availableLayoutControllers=[],this._activeLayoutControllersStack=[],this.transitionExecutor=new t.TransitionExecutor,this._initAnimations(this._animationSet)},_initAnimations:function(i){i&&(n.each(i,function(i,r){n.each(r,function(n,r){t.animationPresets.registerPreset(i,r)})}),t.animationPresets.applyChanges())},_localizeMarkup:function(n){t.localization.localizeNode(n)},_notifyIfBadMarkup:function(t){t.each(function(){var t=n(this).html();/href="#/.test(t)&&r.log("W3005",t)})},_initMarkupFilters:function(t){var i=[];i.push(this._localizeMarkup),t.markupLoaded&&t.markupLoaded.add(function(t){n.each(i,function(n,i){i(t.markup)})})},_createViewCache:function(n){var i=this.callBase(n);return n.viewCache||(i=new t.framework.ConditionalViewCacheDecorator({filter:function(n,t){return!t.viewTemplateInfo.disableCache},viewCache:i})),i},_initViewport:function(){this._$viewPort=this._getViewPort(),l(this._$viewPort)},_getViewPort:function(){var t=n("."+s);return t.length||(t=n("<div>").addClass(s).appendTo(this._$root)),t},_initTemplateContext:function(){this._templateContext=new c({orientation:u.orientation()});u.on("orientationChanged",n.proxy(function(n){this._templateContext.option("orientation",n.orientation)},this))},_showViewImpl:function(t,i){var r=this,u=n.Deferred(),f=u.promise(),e=t.layoutController;return r._obtainViewLink(t),e.showView(t,i).done(function(){r._activateLayoutController(e,r._getTargetNode(t),i).done(function(){u.resolve()})}),y.lock(f),f},_resolveLayoutController:function(n){var t={viewInfo:n,layoutController:null,availableLayoutControllers:this._availableLayoutControllers};return this._processEvent("resolveLayoutController",t,n.model),t.layoutController||this._resolveLayoutControllerImpl(n)},_checkLayoutControllerIsInitialized:function(t){if(t){var i=!1;if(n.each(this._layoutSet,function(n,r){if(r.controller===t)return i=!0,!1}),!i)throw r.Error("E3024");}},_ensureOneLayoutControllerFound:function(n,t){var i=function(n,t){return n==="controller"?"[controller]: { name:"+t.name+" }":t};if(!t.length){r.log("W3003",JSON.stringify(n,null,4),JSON.stringify(this._availableLayoutControllers,i,4));throw r.Error("E3011");}if(t.length>1){r.log("W3004",JSON.stringify(n,null,4),JSON.stringify(t,i,4));throw r.Error("E3012");}},_resolveLayoutControllerImpl:function(t){var r=t.viewTemplateInfo||{},e=t.navigateOptions||{},o=n.extend({root:!t.canBack,customResolveRequired:!1,pane:r.pane,modal:e.modal!==i?e.modal:r.modal||!1},u.current()),s=f.findBestMatches(o,this._availableLayoutControllers);return this._ensureOneLayoutControllerFound(o,s),s[0].controller},_onNavigatingBack:function(n){if(this.callBase.apply(this,arguments),!n.cancel&&!this.canBack()&&this._activeLayoutControllersStack.length>1){var t=this._activeLayoutControllersStack[this._activeLayoutControllersStack.length-2],r=t.activeViewInfo();n.cancel=!0,this._activateLayoutController(t,i,"backward"),this.navigationManager.currentItem(r.key)}},_activeLayoutController:function(){return this._activeLayoutControllersStack.length?this._activeLayoutControllersStack[this._activeLayoutControllersStack.length-1]:i},_getTargetNode:function(t){var r=(t.navigateOptions||{}).jQueryEvent;return r?n(r.target):i},_activateLayoutController:function(t,i,r){var u=this,f=u._activeLayoutController();return f===t?n.Deferred().resolve().promise():t.activate(i).then(n.proxy(this._deactivatePreviousLayoutControllers,this,t,r)).then(function(){u._activeLayoutControllersStack.push(t)})},_deactivatePreviousLayoutControllers:function(t,i){var u=this,f=[],r=u._activeLayoutControllersStack.pop(),o;if(!r)return n.Deferred().resolve().promise();if(t.isOverlay)u._activeLayoutControllersStack.push(r),f.push(r.disable());else{for(var e=n.Deferred(),s=!1,c=function(n,t){return function(){n.deactivate().done(function(){t.resolve()})}};r&&r!==t;)o=n.Deferred(),r.isOverlay?s=!0:u.transitionExecutor.leave(r.element(),h,{direction:i}),e.promise().done(c(r,o)),f.push(o.promise()),r=u._activeLayoutControllersStack.pop();s?e.resolve():(u.transitionExecutor.enter(t.element(),h,{direction:i}),u.transitionExecutor.start().done(function(){e.resolve()}))}return n.when.apply(n,f)},init:function(){var n=this,t=this.callBase();return t.done(function(){n._initLayoutControllers(),n.renderNavigation()}),t},_disposeView:function(n){n.layoutController.disposeView&&n.layoutController.disposeView(n),this.callBase(n)},viewPort:function(){return this._$viewPort},_createViewInfo:function(){var i=this.callBase.apply(this,arguments),u=this.getViewTemplateInfo(i.viewName);if(!u)throw r.Error("E3013","dxView",i.viewName);return i.viewTemplateInfo=u,i.layoutController=this._resolveLayoutController(i),i},_createViewModel:function(n){this.callBase(n),a.extendFromObject(n.model,n.viewTemplateInfo)},_initLayoutControllers:function(){var t=this;n.each(t._layoutSet,function(n,i){var r=i.controller,e=u.current();if(f.findBestMatches(e,[i]).length&&(t._availableLayoutControllers.push(i),r.init&&r.init({app:t,$viewPort:t._$viewPort,navigationManager:t.navigationManager,viewEngine:t.viewEngine,templateContext:t._templateContext,commandManager:t.commandManager}),r.on)){r.on("viewReleased",function(n){t._onViewReleased(n)});r.on("viewHidden",function(n){t._onViewHidden(n)});r.on("viewRendered",function(n){t._processEvent("viewRendered",{viewInfo:n},n.model)});r.on("viewShowing",function(n,i){t._processEvent("viewShowing",{viewInfo:n,direction:i,params:n.routeData},n.model)})}})},_onViewReleased:function(n){this._releaseViewLink(n)},renderNavigation:function(){var t=this;n.each(t._availableLayoutControllers,function(n,i){var r=i.controller;r.renderNavigation&&r.renderNavigation(t.navigation)})},getViewTemplate:function(n){return this.viewEngine.getViewTemplate(n)},getViewTemplateInfo:function(n){var t=this.viewEngine.getViewTemplateInfo(n);return t&&t.option()},loadTemplates:function(n){return this.viewEngine.loadTemplates(n)},templateContext:function(){return this._templateContext}})}(jQuery,DevExpress),DevExpress.MOD_FRAMEWORK=!0}