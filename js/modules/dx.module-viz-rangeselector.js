/*! 
* DevExtreme (Range Selector)
* Version: 15.2.12
* Build date: Aug 29, 2016
*
* Copyright (c) 2012 - 2016 Developer Express Inc. ALL RIGHTS RESERVED
* EULA: https://www.devexpress.com/Support/EULAs/DevExtreme.xml
*/
"use strict";if(!window.DevExpress||!DevExpress.MOD_VIZ_RANGESELECTOR){if(!window.DevExpress||!DevExpress.MOD_VIZ_CORE)throw Error("Required module is not referenced: viz-core");(function(n,t,i){function ii(){return new f.Translator2D({},{})}function ri(n,t,i){n.update(t,{left:i[0],width:i[1]},{isHorizontal:!0})}function vt(n,t,r){var u=t===i?ot:nt(t,r),f=tt(n,u,r.font);return g(f.height)+2*r.paddingTopBottom+et}function yt(n,t,i){var r=nt(t,i.label),u=tt(n,r,i.label.font);return g(u.width/2)}function ui(n){var t,i,r;if(o(n))t=i=r=n;else if(n)o(n.height)&&(r=n.height),o(n.width)?t=i=n.width:n.width&&(o(n.width.left)&&(t=n.width.left),o(n.width.right)&&(i=n.width.right));else return null;return{widthLeft:t,widthRight:i,height:r}}function fi(n,t,r,u){var h,c=0,l=0,a,f=0,e=0,s,o;return u=u||{},o=ui(r.placeholderSize),o&&u.left===i&&u.right===i?(f=o.widthLeft,e=o.widthRight):(f=u.left,e=u.right),s=o&&r.placeholderHeight===i?o.height:r.placeholderHeight,r.visible&&(h=vt(n,t.startValue,r),a=vt(n,t.endValue,r),s===i&&(s=d(h,a))),t.label.visible&&(c=yt(n,t.startValue,t),l=yt(n,t.endValue,t)),f=f!==i?f:c,e=(e!==i?e:l)||1,{left:f,right:e,top:s||0,bottom:0}}function pt(n,i){var u=t.type(n),f=t.type(i),r=function(n){return u===n||f===n};return r("date")?p:r("number")?"numeric":r(b)?b:""}function ei(n){return n.valueType===p&&n.marker.visible}function oi(n,t){var i=t.minorTickInterval||t.tickInterval;t.valueType==="datetime"&&(i=rt(i)),n.addRange({interval:i})}function wt(n,t,r){var u;n&&(u=n.logarithmBase,n.type===lt&&u<=0||u&&!o(u)?(n.logarithmBase=t,r("E2104")):n.type!==lt&&(n.logarithmBase=i))}function si(n,t,i){var u,f="0",e={value:0,valueText:f},r=t.label,o=t.marker,h=r.customizeText,c=t.placeholderHeight,l=s.isFunction(h)?h.call(e,e):f,a=r.visible;return c?c:(u=tt(n,l,r.font),(a?r.topIndent+u.height:0)+(i?o.topIndent+o.separatorHeight:0))}function hi(n,t,i,r,u,e){var s=n._categoriesInfo,o=f.CoreFactory.createTickManager({axisType:n.type,dataType:n.valueType},{min:u,max:e,screenDelta:t,customTicks:s&&s.categories},{labelOptions:{},boundCoef:1,minorTickInterval:n.minorTickInterval,tickInterval:n.tickInterval,incidentOccured:i,base:n.logarithmBase,showMinorTicks:!0,withMinorCorrection:!0,stick:r!==!1}),h=o.getTicks(!0);return{tickInterval:o.getTickInterval(),minorTickInterval:o.getMinorTickInterval(),bounds:o.getTickBounds(),ticks:h}}function ci(n,t){var o,s,l=!1,v,i=t.startValue,u=t.endValue,h,e,c=n?n.getBoundRange().arg:new f.Range,y;return t.type===w&&(y=new f.Range({minVisible:i,maxVisible:u}),y.addRange(c),c=y,h=n?n.argCategories:t.categories||!n&&i&&u&&[i,u],h=h||[],t._categoriesInfo=e=k.getCategoriesInfo(h,i||h[0],u||h[h.length-1])),r(i)&&r(u)?(l=e?e.inverted:i>u,o=e?e.start:l?u:i,s=e?e.end:l?i:u):r(i)||r(u)?(o=i,s=u):e&&(o=e.start,s=e.end),v=a(o)&&a(s)&&o.getTime()===s.getTime(),o===s||v||c.addRange({invert:l,min:o,max:s,minVisible:o,maxVisible:s,dataType:t.valueType}),c.addRange({categories:h,base:t.logarithmBase,axisType:t.type}),c.isDefined()||(v&&(t.valueType="numeric"),c.setStubData(t.valueType)),c}function li(n,t){return!r(n)||!r(t)}function tt(n,t,i){var r=n.text(t,at,at).css(kt(i)).append(n.root),u=r.getBBox();return r.remove(),u}function ai(n){return function(t,i,r,u,f){return i&&t&&(f.years||f.months>=6||n/ni<g((u-r)/rt("year"))+1)&&(i=!1),i}}function vi(n,t,u,f,e){var o,v,s=n._categoriesInfo,y=n.valueType===p,l=n.type===w;!t||t.isEmpty()||u.stubData||(o=f.bounds,u.addRange(o),n.startValue=u.invert?o.maxVisible:o.minVisible,n.endValue=u.invert?o.minVisible:o.maxVisible),n.marker.visible=e(y&&!l,n.marker.visible,n.startValue,n.endValue,f.tickInterval),s&&(n.startValue=s.start,n.endValue=s.end),l||(v=a(n.startValue)&&a(n.endValue)&&n.startValue.getTime()===n.endValue.getTime()||n.startValue===n.endValue),n.isEmpty=li(n.startValue,n.endValue)||v,n.isEmpty?n.startValue=n.endValue=i:(n.minorTickInterval=f.minorTickInterval,n.tickInterval=f.tickInterval,y&&!r(n.label.format)&&(n.label.format=l?c.getDateFormatByTicks(f.ticks):n.marker.visible?h.getDateUnitInterval(n.tickInterval):c.getDateFormatByTickInterval(n.startValue,n.endValue,n.tickInterval)))}function yi(n,t,u){var o=0,f=ut.correctValueType(ft(n.valueType)),e,s=function(t,f){var e=t===l?"start":"end";r(n[t])&&(o=f(n[t]),r(o)?n[t]=o:(n[t]=i,u("E2202",[e])))};return t&&(f=t.getCalculatedValueType()||f),f||(f=pt(n.startValue,n.endValue)||"numeric"),(f===b||n.categories)&&(n.type=w,f=b),n.valueType=f,e=ut.getParser(f),s(l,e),s(y,e),wt(n,ti,u),n.type||(n.type="continuous"),n.tickInterval===i&&(n.tickInterval=n.majorTickInterval),n.minorTick.visible&&(n.minorTick.visible=n.showMinorTicks),n.parser=e,n}function pi(n,t){var r=t.getVerticalCuttedSize({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width-n.left-n.right,height:n.height-n.top-n.bottom}),i=t.getLayoutOptions(),u;return i&&(u={x:r.left,y:r.top,width:r.width,height:r.height+i.height,getLayoutOptions:function(){return this}},i.verticalAlignment!=="bottom"&&(u.y-=i.height),t.position({at:i.position,my:i.position,of:u})),r}function wi(n,t,i,r){return n.label.overlappingBehavior={mode:n.useTicksAutoArrangement?"enlargeTickInterval":"ignore"},n.marker.label.font=n.label.font,n.color=n.marker.color=n.tick.color,n.opacity=n.marker.opacity=n.tick.opacity,n.width=n.marker.width=n.tick.width,n.placeholderSize=(n.placeholderHeight||0)+r,n.argumentType=n.valueType,n.visible=t,n.minorTick.showCalculatedTicks=n.isHorizontal=n.withoutOverlappingBehavior=n.stick=!0,t||(n.minorTick.length=n.tick.length=i),n.label.indentFromAxis=n.label.topIndent+r,n}function bi(n,r,u){function f(t){var r=t.target.range,f=n.minRange?h.addInterval(r.startValue,n.minRange):i,e=n.maxRange?h.addInterval(r.startValue,n.maxRange):i;f&&f>r.endValue||e&&e<r.endValue||u(r)}t.each(r,function(n,t){t.on("dxpointerdown",f)})}function it(t){this._axis=new n.viz.axes.Axis({renderer:t.renderer,axesContainerGroup:t.root,axisType:"xyAxes",drawingType:"linear",widgetClass:"dxrs",axisClass:"range-selector"}),this._updateSelectedRangeCallback=t.updateSelectedRange,this._translator=t.translator}var u=n.viz.rangeSelector={},s=n.require("/utils/utils.common"),bt=n.require("/utils/utils.math"),h=n.require("/utils/utils.date"),rt=h.dateToMilliseconds,f=n.viz,k=f.utils,kt=k.patchFontOptions,ut=f.parseUtils,ft=k.normalizeEnum,c=n.require("/utils/utils.formatHelper"),dt=24,et=4,ot=". . .",r=s.isDefined,o=s.isNumber,a=s.isDate,d=Math.max,g=Math.ceil,v=t.noop,l="startValue",y="endValue",p="datetime",e="selectedRange",w="discrete",b="string",st=e+"Changed",ht="containerBackgroundColor",ct="sliderMarker",gt="background",lt="logarithmic",at=-1e3,ni=50,ti=10,nt;u.utils={trackerSettings:{fill:"grey",stroke:"grey",opacity:.0001},animationSettings:{duration:250}},u.consts={emptySliderMarkerText:ot,pointerSize:et},nt=u.formatValue=function(n,t){var i={value:n,valueText:c.format(n,t.format,t.precision)};return String(s.isFunction(t.customizeText)?t.customizeText.call(i,i):i.valueText)},n.require("/componentRegistrator")("dxRangeSelector",u,f.BaseWidget.inherit({_eventsMap:t.extend({},f.BaseWidget.prototype._eventsMap,{onSelectedRangeChanged:{name:st}}),_setDeprecatedOptions:function(){this.callBase.apply(this,arguments),t.extend(this._deprecatedOptions,{"sliderMarker.padding":{since:"15.1",message:"Use the 'paddingTopBottom' and 'paddingLeftRight' options instead"},"sliderMarker.placeholderSize":{since:"15.1",message:"Use the 'placeholderHeight' and 'indent' options instead"},"scale.majorTickInterval":{since:"15.2",message:"Use the 'tickInterval' options instead"},"scale.showMinorTicks":{since:"15.2",message:"Use the 'minorTick.visible' options instead"}})},_rootClassPrefix:"dxrs",_rootClass:"dxrs-range-selector",_invalidatingOptions:["scale","selectedRangeColor","containerBackgroundColor","sliderMarker","sliderHandle","shutter","title",gt,"behavior","chart","indent"],_dataIsReady:function(){return this._dataSource.isLoaded()},_init:function(){this.callBase.apply(this,arguments),this._updateDataSource()},_initCore:function(){var n=this,t=n._renderer,i=t.root,r,f,o,s;i.css({"touch-action":"pan-y","-ms-touch-action":"pan-y"}),n._clipRect=t.clipRect(),r=t.g().attr({"class":"dxrs-view"}).append(i),f=t.g().attr({"class":"dxrs-slidersContainer",clipId:n._clipRect.id}).append(i),o=t.g().attr({"class":"dxrs-scale",clipId:n._clipRect.id}).append(i),s=t.g().attr({"class":"dxrs-trackers"}).append(i),n._translator=ii(),n._rangeView=new u.RangeView({renderer:t,root:r,translator:n._translator}),n._slidersController=new u.SlidersController({renderer:t,root:f,trackersGroup:s,updateSelectedRange:function(t){n.option(e,t),n._eventTrigger(st,{startValue:t.startValue,endValue:t.endValue})},translator:n._translator}),n._axis=new it({renderer:t,root:o,updateSelectedRange:function(t){n.setSelectedRange(t)},translator:n._translator}),n._tracker=new u.Tracker({renderer:t,controller:n._slidersController})},_getDefaultSize:function(){return{width:400,height:160}},_disposeCore:function(){this._axis.dispose(),this._slidersController.dispose(),this._tracker.dispose()},_createThemeManager:function(){return new u.ThemeManager},_render:function(){var n=this,i=n._renderer,r,t;i.lock(),n.__isResizing&&(r=i.animationEnabled(),i.updateAnimationOptions({enabled:!1})),t=pi(n._canvas,n._title),n._clipRect.attr({x:t.left,y:t.top,width:t.width,height:t.height}),n._updateContent(t),n.__isResizing&&i.updateAnimationOptions({enabled:r}),i.unlock(),!n.__isResizing&&n._dataIsReady()&&n.hideLoadingIndicator(),n._drawn()},_handleChangedOptions:function(n){var i=this,r=i._options[e],u=t.extend({},n[e]);i.callBase.apply(i,arguments),"dataSource"in n&&(i._options[e]=null,i._updateDataSource()),e in n&&!("scale"in n)&&i.setSelectedRange(t.extend({},r,n[e],u))},_applySize:function(){this._initialized&&(this.__isResizing=!0,this._render(),this.__isResizing=!1)},_dataSourceChangedHandler:function(){this._initialized&&this._render()},_updateContent:function(n){var t=this,h=t.option("chart"),f=t._createSeriesDataSource(h),l=!(f&&f.isShowChart()||t.option("background.image.url")),i=yi(t._getOption("scale"),f,t._incidentOccured),u=ci(f,i),y=r(u.minVisible)?u.minVisible:u.min,p=r(u.maxVisible)?u.maxVisible:u.max,a=hi(i,n.width,t._incidentOccured,u.stick,y,p),c,e,v,o,s=f&&f.isShowChart()&&f.getThemeManager();s&&wt(h&&h.valueAxis,s.getOptions("valueAxis").logarithmBase,t._incidentOccured),vi(i,f,u,a,ai(n.width)),oi(u,i),c=t._prepareSliderMarkersOptions(i,n.width,a),e=fi(t._renderer,i,c,t.option("indent")),v=si(t._renderer,i,ei(i)),o={left:n.left+e.left,top:n.top+e.top,width:d(n.width-e.left-e.right,1),height:d(l?dt:n.height-e.top-e.bottom-v,0)},ri(t._translator,u,[o.left,o.left+o.width]),i.minorTickInterval=i.isEmpty?0:i.minorTickInterval,t._updateElements(i,c,l,o,f),s&&s.dispose()},_updateElements:function(n,t,i,u,f){var o=this,h=o._getOption("behavior"),s=o.option(e),c=o._getOption("shutter");s&&(r(s[l])&&!o._translator.isValid(s[l])&&o._incidentOccured("E2203",[l]),r(s[y])&&!o._translator.isValid(s[y])&&o._incidentOccured("E2203",[y])),c.color=c.color||o._getOption(ht,!0),o._rangeView.update(o.option("background"),o._themeManager.theme("background"),u,i,h.animationEnabled&&o._renderer.animationEnabled(),f),o._axis.update(n,i,u),o._isUpdating=!0,o._slidersController.update([u.top,u.top+u.height],h,i,o._getOption("sliderHandle"),t,c,{minRange:o.option("scale.minRange"),maxRange:o.option("scale.maxRange")},o._axis.getFullTicks(),o._getOption("selectedRangeColor",!0)),o._slidersController.setSelectedRange(s),o._isUpdating=!1,o._tracker.update(!o._translator.isEmptyValueRange(),h)},_createSeriesDataSource:function(n){var i=this,f,e=i._dataSource.items(),r=i._getOption("scale"),o=r.valueType||pt(r.startValue,r.endValue);return(e||n&&n.series)&&(n=t.extend({},n,{theme:i.option("theme")}),f=new u.SeriesDataSource({renderer:i._renderer,dataSource:e,valueType:ft(o),axisType:r.type,chart:n,dataSourceField:i.option("dataSourceField"),incidentOccured:i._incidentOccured,categories:r.categories})),f},_prepareSliderMarkersOptions:function(n,t,u){var s=this,e=u.minorTickInterval,y=u.tickInterval,a=n.endValue,v=n.startValue,f=s._getOption(ct),b,l=s.option(ct)||{},k=n.type===w,d=n.valueType===p;return f.borderColor=s._getOption(ht,!0),f.format||(!s._getOption("behavior").snapToTicks&&o(n.startValue)&&(b=Math.abs(a-v),f.format="fixedPoint",f.precision=bt.getSignificantDigitPosition(b/t)),d&&!k&&(n.marker.visible?f.format=h.getDateUnitInterval(r(e)&&e!==0?e:y):r(v)&&r(a)&&(f.format=c.getDateFormatByTickInterval(v,a,e!==0?e:y))),d&&k&&u.ticks.length&&(f.format=c.getDateFormatByTicks(u.ticks))),l.padding!==i&&l.paddingLeftRight===i&&l.paddingTopBottom===i&&(f.paddingLeftRight=f.paddingTopBottom=l.padding),f},getSelectedRange:function(){return this._slidersController.getSelectedRange()},setSelectedRange:function(n){var t;!this._isUpdating&&n&&(t=this._slidersController.getSelectedRange(),t&&t.startValue===n.startValue&&t.endValue===n.endValue||this._slidersController.setSelectedRange(n))},resetSelectedRange:function(){this.setSelectedRange({})},render:function(n){var t=this;return t.__isResizing=n,t.callBase.apply(t,arguments),t.__isResizing=!1,t},_initTooltip:v,_setTooltipRendererOptions:v,_setTooltipOptions:v,_hideTooltip:v})),it.prototype={constructor:it,dispose:function(){this._axis.dispose()},update:function(n,t,i){var r=this._axis;r.updateOptions(wi(n,t,i.height,i.height/2-Math.ceil(n.width/2))),r.delta={bottom:-i.height/2},r.setTranslator(this._translator,{translateSpecialCase:function(){return i.top+i.height}}),r.draw(),r.getMarkerTrackers()&&bi(n,r.getMarkerTrackers(),this._updateSelectedRangeCallback)},getFullTicks:function(){return this._axis.getFullTicks()}}})(DevExpress,jQuery),function(n,t,i){function f(n,t,i,r){return[n,t,i,t,i,r,n,r]}function e(n){return n&&n.valueOf()}function o(n,t){return n<t}function s(n,t){return n>t}function r(n,t){for(var i=0,r=t?t.length-1:0,f,u=n;r-i>1;){if(f=i+r>>1,u=t[f],u===n)return n;n<u?r=f:i=f}return t&&(u=t[n-t[i]<=t[r]-n?i:r]),u}function c(){this._lastSelectedRange=this.getSelectedRange(),delete this._processSelectionChanged}function a(n){n.setSelectedRange=t.noop,n._processSelectionChanged===c&&n._processSelectionChanged()}function v(n){delete n.setSelectedRange}function h(n){var t=this,i={renderer:n.renderer,root:n.root,trackersGroup:n.trackersGroup,translator:n.translator};t._params=n,t._areaTracker=n.renderer.path(null,"area").attr({"class":"area-tracker",fill:"#000000",opacity:.0001}).append(n.trackersGroup),t._selectedAreaTracker=n.renderer.path(null,"area").attr({"class":"selected-area-tracker",fill:"#000000",opacity:.0001}).append(n.trackersGroup),t._shutter=n.renderer.path(null,"area").append(n.root),t._sliders=[new u.Slider(i,0),new u.Slider(i,1)],t._processSelectionChanged=c}var u=n.viz.rangeSelector,l=n.viz.utils.normalizeEnum;h.prototype={constructor:h,dispose:function(){this._sliders[0].dispose(),this._sliders[1].dispose()},getTrackerTargets:function(){return{area:this._areaTracker,selectedArea:this._selectedAreaTracker,sliders:this._sliders}},_processSelectionChanged:function(){var n=this,t=n.getSelectedRange();(e(t.startValue)!==e(n._lastSelectedRange.startValue)||e(t.endValue)!==e(n._lastSelectedRange.endValue))&&(n._lastSelectedRange=t,n._params.updateSelectedRange(t))},update:function(n,t,i,r,u,e,o,s,h){var c=this,a=c._params.translator.getScreenRange();c._verticalRange=n,c._minRange=o.minRange,c._maxRange=o.maxRange,c._animationEnabled=t.animationEnabled&&c._params.renderer.animationEnabled(),c._allowSlidersSwap=t.allowSlidersSwap,c._sliders[0].update(n,r,u),c._sliders[1].update(n,r,u),c._sliders[0]._position=c._sliders[1]._position=a[0],c._values=!c._params.translator.isValueProlonged&&t.snapToTicks?s:null,c._areaTracker.attr({points:f(a[0],n[0],a[1],n[1])}),c._isCompactMode=i,c._shutterOffset=r.width/2,c._updateSelectedView(e,h),c._isOnMoving=l(t.callSelectedRangeChanged)==="onmoving",c._updateSelectedRange(),c._applyTotalPosition(!1)},_updateSelectedView:function(n,t){var i={fill:null,"fill-opacity":null,stroke:null,"stroke-width":null};this._isCompactMode?(i.stroke=t,i["stroke-width"]=3,i.sharp="v"):(i.fill=n.color,i["fill-opacity"]=n.opacity),this._shutter.attr(i)},_updateSelectedRange:function(){var n=this,t=n._sliders;t[0].cancelAnimation(),t[1].cancelAnimation(),n._shutter.stopAnimation(),n._params.translator.isEmptyValueRange()?(t[0]._setText(u.consts.emptySliderMarkerText),t[1]._setText(u.consts.emptySliderMarkerText),t[0]._value=t[1]._value=i,t[0]._position=n._params.translator.getScreenRange()[0],t[1]._position=n._params.translator.getScreenRange()[1],n._applyTotalPosition(!1),a(n)):v(n)},_applyTotalPosition:function(n){var t=this._sliders,i;n=this._animationEnabled&&n,t[0].applyPosition(n),t[1].applyPosition(n),i=t[0].getCloudBorder()>t[1].getCloudBorder(),t[0].setOverlapped(i),t[1].setOverlapped(i),this._applyAreaTrackersPosition(),this._applySelectedRangePosition(n)},_applyAreaTrackersPosition:function(){var n=this,t=n._sliders[0].getPosition(),i=n._sliders[1].getPosition();n._selectedAreaTracker.attr({points:f(t,n._verticalRange[0],i,n._verticalRange[1])}).css({cursor:Math.abs(n._params.translator.getScreenRange()[1]-n._params.translator.getScreenRange()[0]-i+t)<.001?"default":"pointer"})},_applySelectedRangePosition:function(n){var t=this,i=t._verticalRange,o=t._sliders[0].getPosition(),s=t._sliders[1].getPosition(),r,e;t._isCompactMode?e=[o+Math.ceil(t._shutterOffset),(i[0]+i[1])/2,s-Math.floor(t._shutterOffset),(i[0]+i[1])/2]:(r=t._params.translator.getScreenRange(),e=[f(r[0],i[0],Math.max(o-Math.floor(t._shutterOffset),r[0]),i[1]),f(r[1],i[0],Math.min(s+Math.ceil(t._shutterOffset),r[1]),i[1])]),n?t._shutter.animate({points:e},u.utils.animationSettings):t._shutter.attr({points:e})},getSelectedRange:function(){return{startValue:this._sliders[0].getValue(),endValue:this._sliders[1].getValue()}},setSelectedRange:function(n){n=n||{};var i=this,t=i._params.translator,u=t.isValid(n.startValue)?t.parse(n.startValue):t.getRange()[0],f=t.isValid(n.endValue)?t.parse(n.endValue):t.getRange()[1],r=t.to(u,-1)<t.to(f,1)?[u,f]:[f,u];i._sliders[0].setDisplayValue(r[0]),i._sliders[1].setDisplayValue(r[1]),i._sliders[0]._position=t.to(r[0],-1),i._sliders[1]._position=t.to(r[1],1),i._applyTotalPosition(!0),i._processSelectionChanged()},beginSelectedAreaMoving:function(n){function f(n){n!==r&&n>r==n>(t[0].getPosition()+t[1].getPosition())/2-u&&i._moveSelectedArea(n+u,!1),r=n}var i=this,t=i._sliders,u=(t[0].getPosition()+t[1].getPosition())/2-n,r=n;return f.complete=function(){i._dockSelectedArea()},f},_dockSelectedArea:function(){var t=this._params.translator,n=this._sliders;n[0]._position=t.to(n[0].getValue(),-1),n[1]._position=t.to(n[1].getValue(),1),this._applyTotalPosition(!0),this._processSelectionChanged()},moveSelectedArea:function(n){this._moveSelectedArea(n,!0),this._dockSelectedArea()},_moveSelectedArea:function(n,t){var i=this,u=i._params.translator,f=i._sliders,s=f[1].getPosition()-f[0].getPosition(),e=n-s/2,o=n+s/2,h,c;e<u.getScreenRange()[0]&&(e=u.getScreenRange()[0],o=e+s),o>u.getScreenRange()[1]&&(o=u.getScreenRange()[1],e=o-s),h=u.from(e,-1),c=u.from(o,1),f[0].setDisplayValue(r(h,i._values)),f[1].setDisplayValue(r(c,i._values)),f[0]._position=e,f[1]._position=o,i._applyTotalPosition(t),i._isOnMoving&&i._processSelectionChanged()},placeSliderAndBeginMoving:function(n,t){var f=this,e=f._params.translator,c=f._sliders,i=n<t?0:1,h=i>0?1:-1,v=i>0?s:o,p=i>0?o:s,a,l=[],u=[],y;return u[i]=e.from(n,h),u[1-i]=e.from(t,-h),l[1-i]=t,e.isValueProlonged&&(v(n,e.to(u[i],h))&&(u[i]=e.from(n,-h)),v(t,e.to(u[i],-h))&&(u[1-i]=u[i])),f._minRange&&(a=e.to(e.add(r(u[i],f._values),f._minRange,-h),-h),v(t,a)&&(u[1-i]=e.add(u[i],f._minRange,-h)),a=e.to(e.add(e.getRange()[1-i],f._minRange,h),-h),p(n,a)&&(u[1-i]=e.getRange()[1-i],u[i]=e.add(u[1-i],f._minRange,h),l[1-i]=n)),u[0]=r(u[0],f._values),u[1]=r(u[1],f._values),l[i]=e.to(u[i],h),c[0].setDisplayValue(u[0]),c[1].setDisplayValue(u[1]),c[0]._position=l[0],c[1]._position=l[1],f._applyTotalPosition(!0),f._isOnMoving&&f._processSelectionChanged(),y=f.beginSliderMoving(1-i,t),c[1-i]._sliderGroup.stopAnimation(),f._shutter.stopAnimation(),y(t),y},beginSliderMoving:function(n,t){function w(n){var t,d,o,s,w;n!==y&&(l(n+p,v)&&(t=i._allowSlidersSwap,t&&!f.isValueProlonged&&i._minRange&&(t=f.isValid(f.add(h[1-u].getValue(),i._minRange,-e))),t&&(i._changeMovingSlider(u),u=1-u,e=-e,d=l,l=a,a=d,c=-e*Math.abs(c),p=-c)),a(n+c,v)&&(t=!0,s=h[u],w=h[1-u].getValue(),o=Math.max(Math.min(n+c,k),b),t&&f.isValueProlonged&&(t=!l(o,f.to(w,e))),t&&i._minRange&&(t=!l(o,f.to(f.add(w,i._minRange,e),e))),t&&i._maxRange&&(t=!a(o,f.to(f.add(w,i._maxRange,e),e))),s._setValid(t),s.setDisplayValue(t?r(f.from(o,e),i._values):s.getValue()),s._position=o,i._applyTotalPosition(!1),s.toForeground(),i._isOnMoving&&i._processSelectionChanged())),y=n}var i=this,f=i._params.translator,h=i._sliders,b=f.getScreenRange()[0],k=f.getScreenRange()[1],u=n,v=h[1-u].getPosition(),y=t,e=u>0?1:-1,l=u>0?o:s,a=u>0?s:o,c=h[u].getPosition()-t,p=l(h[u].getPosition(),t)?-c:c;return w.complete=function(){h[u]._setValid(!0),i._dockSelectedArea()},w},_changeMovingSlider:function(n){var i=this,u=i._params.translator,t=i._sliders,e=t[1-n].getPosition(),o=n>0?1:-1,f;t[n].setDisplayValue(r(u.from(e,o),i._values)),f=u.from(e,-o),u.isValueProlonged?f=u.from(e,o):i._minRange&&(f=u.add(f,i._minRange,-o)),t[1-n].setDisplayValue(r(f,i._values)),t[n]._setValid(!0),t[n]._marker._update(),t[0]._position=t[1]._position=e},foregroundSlider:function(n){this._sliders[n].toForeground()}},u.SlidersController=h}(DevExpress,jQuery),function(n,t,i){function f(n){var r=n||window.event,t=r.originalEvent,f=r.touches,u=t?t.pointerType:!1,e=t?t.touches:!1,o=r.which===i&&r.button===1,s=t&&u!==i&&(u===(t.MSPOINTER_TYPE_TOUCH||"touch")||u===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&t.buttons===1),h=o||r.which===1,c=f&&f.length>0||e&&e.length>0;return h||s||c}function h(n){var t=n.originalEvent,i=n.touches,r=t&&t.touches;return i&&i.length>1||r&&r.length>1||null}function c(n){h(n)||n.preventDefault()}function l(n){h(n)||(n.stopPropagation(),n.preventDefault())}function e(n){return n&&n.type&&n.type.indexOf("touch")===0}function u(n){var t=n.originalEvent,i=0;return n.pageX?i=n.pageX:t&&t.pageX&&(i=t.pageX),t&&t.touches&&(t.touches.length>0?i=t.touches[0].pageX:t.changedTouches.length>0&&(i=t.changedTouches[0].pageX)),i}function y(n,t,i,o){function y(){c&&(c=!1,h&&(h.complete(),h=null))}var v,c=!1,l,h=null,a={};a[r.move]=function(t){var r,a;v===e(t)&&(f(t)||y(),c&&(r=u(t),a=o(),h?h(r-a):i.manualRangeSelectionEnabled&&Math.abs(l-r)>=s&&(h=n.placeSliderAndBeginMoving(l-a,r-a))))},a[r.up]=function(t){var r;c&&(r=u(t),!h&&i.moveSelectedRangeByClick&&Math.abs(l-r)<s&&n.moveSelectedArea(r-o()),y())};t.on(r.down,function(n){i.enabled&&f(n)&&!c&&(c=!0,v=e(n),l=u(n))});return a}function p(n,t,i,o){function y(){s&&(s=!1,h.complete(),h=null)}var v,s=!1,h=null,a={};a[r.move]=function(n){v===e(n)&&(f(n)||y(),s&&(c(n),h(u(n)-o())))},a[r.up]=y;t.on(r.down,function(t){i.enabled&&f(t)&&!s&&(s=!0,v=e(t),h=n.beginSelectedAreaMoving(u(t)-o()),l(t))});return a}function w(t,i,o,s){function p(){h&&(h=!1,a.complete(),a=null)}var y,h=!1,a=null,v={};return v[r.move]=function(n){y===e(n)&&(f(n)||p(),h&&(c(n),a(u(n)-s())))},v[r.up]=p,n.each(i,function(n,i){var c={};c[r.down]=function(i){o.enabled&&f(i)&&!h&&(h=!0,y=e(i),a=t.beginSliderMoving(n,u(i)-s()),l(i))},c[r.move]=function(){a||t.foregroundSlider(n)};i.on(c)}),v}function o(t){function u(){return t.renderer.getRootOffset().left}var i=this._state={},r=t.controller.getTrackerTargets();v&&t.renderer.root.css({msTouchAction:"pinch-zoom"}),this._docEvents=[p(t.controller,r.selectedArea,i,u),y(t.controller,r.area,i,u),w(t.controller,r.sliders,i,u)],n.each(this._docEvents,function(t,i){n(document).on(i)})}var a=t.viz.rangeSelector,r=t.require("/ui/events/pointer/ui.events.pointer"),v=t.require("/utils/utils.support").pointer,s=10;o.prototype={constructor:o,dispose:function(){n.each(this._docEvents,function(t,i){n(document).off(i)})},update:function(n,t){var i=this._state;i.enabled=n,i.moveSelectedRangeByClick=t.moveSelectedRangeByClick,i.manualRangeSelectionEnabled=t.manualRangeSelectionEnabled}},a.Tracker=o}(jQuery,DevExpress),function(n){function s(n){return f.touchEvents||f.pointer?o:e<n?n:e}function r(n,t){var r=this;r._translator=n.translator,r._sliderGroup=n.renderer.g().attr({"class":"slider"}).append(n.root),r._line=n.renderer.path(null,"line").append(r._sliderGroup),r._marker=new i.SliderMarker(n.renderer,r._sliderGroup,t===1),r._tracker=n.renderer.rect().attr({"class":"slider-tracker",fill:"#000000",opacity:.0001}).css({cursor:"w-resize"}).append(n.trackersGroup)}var i=n.viz.rangeSelector,u=i.utils,f=n.require("/utils/utils.support"),e=8,o=20;r.prototype={constructor:r,cancelAnimation:function(){this._sliderGroup.stopAnimation(),this._tracker.stopAnimation()},applyPosition:function(n){var t=this,r=t._sliderGroup,f=t._tracker,i={translateX:t._position};t._marker.setPosition(t._position),n?(r.animate(i,u.animationSettings),f.animate(i,u.animationSettings)):(r.attr(i),f.attr(i))},_setValid:function(n){this._marker.setValid(n),this._line.attr({stroke:this._colors[Number(n)]})},_setText:function(n){this._marker.setText(n)},update:function(n,t,i){var r=this,u;r._formatOptions={format:i.format,precision:i.precision,customizeText:i.customizeText},r._marker.applyOptions(i,r._translator.getScreenRange()),r._colors=[i.invalidRangeColor,t.color],r._sliderGroup.attr({translateY:n[0]}),r._line.attr({"stroke-width":t.width,stroke:t.color,"stroke-opacity":t.opacity,sharp:"h",points:[0,0,0,n[1]-n[0]]}),u=s(t.width),r._tracker.attr({x:-u/2,y:0,width:u,height:n[1]-n[0],translateY:n[0]})},toForeground:function(){this._sliderGroup.toForeground()},getSliderTracker:function(){return this._tracker},getPosition:function(){return this._position},setDisplayValue:function(n){this._value=n,this._setText(i.formatValue(n,this._formatOptions))},setOverlapped:function(n){this._marker.setOverlapped(n)},getValue:function(){return this._value},on:function(n,t){this._tracker.on(n,t);this._marker.getTracker().on(n,t)},getCloudBorder:function(){return this._marker.getBorderPosition()},dispose:function(){this._marker.dispose()}},i.Slider=r}(DevExpress),function(n){function r(n,t,i){var r=this;r._isLeftPointer=i,r._isOverlapped=!1,r._group=n.g().attr({"class":"slider-marker"}).append(t),r._area=n.path(null,"area").append(r._group),r._label=n.text().attr({align:"left"}).append(r._group),r._tracker=n.rect().attr({"class":"slider-marker-tracker",fill:"#000000",opacity:.0001}).css({cursor:"pointer"}).append(r._group),r._border=n.rect(0,0,1,0)}var u=n.viz.rangeSelector,f=n.viz.utils.patchFontOptions,e=75,i=u.consts.pointerSize;r.prototype={constructor:r,_getRectSize:function(n){return{width:Math.round(2*this._paddingLeftRight+n.width),height:Math.round(2*this._paddingTopBottom+n.height)}},_getTextSize:function(){var n=this._label.getBBox();return!this._textHeight&&isFinite(n.height)&&(this._textHeight=n.height),{width:n.width,height:this._textHeight,y:n.y}},_getAreaPointsInfo:function(n){var u=this,v=u._getRectSize(n),f=v.width,s=v.height,t=-f,r=0,e=i,c=0,o=-i,h=u._position,l=u._isLeftPointer,y=function(){t++,r++,e++,c++,o++},p=function(){e>r?e=r:o<t&&(o=t),l&&y()},a=h;return l?h>u._range[1]-f?(r=-h+u._range[1],t=r-f,p(),a+=t):(t=o=0,r=f):h-u._range[0]<f?(t=-(h-u._range[0]),r=t+f,p(),a+=r):(e=0,y()),u._borderPosition=a,{offset:t,isCutted:(!l||c!==o)&&(l||c!==e),points:[t,0,r,0,r,s,e,s,c,s+i,o,s,t,s]}},_update:function(){function f(t,r){var u,f,e;r=r||n._getRectSize(t),n._group.attr({translateY:-(r.height+i)}),f=n._getAreaPointsInfo(t),u=f.points,e=f.offset,n._area.attr({points:u}),n._border.attr({x:n._isLeftPointer?u[0]-1:u[2],height:f.isCutted?r.height:r.height+i}),n._tracker.attr({translateX:e,width:r.width,height:r.height+i}),n._label.attr({translateX:n._paddingLeftRight+e,translateY:r.height/2-(t.y+t.height/2)})}var n=this,r,t,u;clearTimeout(n._timeout),n._label.attr({text:n._text||""}),t=n._getTextSize(),u=n._getRectSize(t),r=n._textSize||t,r=n._textSize=t.width>r.width||t.height>r.height?t:r,n._timeout=setTimeout(function(){f(t,u),n._textSize=t},e),f(r)},setText:function(n){this._text=n},setPosition:function(n){this._position=n,this._update()},applyOptions:function(n,t){var i=this;i._range=t,i._paddingLeftRight=n.paddingLeftRight,i._paddingTopBottom=n.paddingTopBottom,i._textHeight=null,i._colors=[n.invalidRangeColor,n.color],i._area.attr({fill:n.color}),i._border.attr({fill:n.borderColor}),i._label.css(f(n.font)),i._update()},getTracker:function(){return this._tracker},setValid:function(n){this._area.attr({fill:this._colors[Number(n)]})},setColor:function(n){this._area.attr({fill:n})},dispose:function(){clearTimeout(this._timeout)},setOverlapped:function(n){var t=this;t._isOverlapped!==n&&(n?t._border.append(t._group):t._isOverlapped&&t._border.remove(),t._isOverlapped=n)},getBorderPosition:function(){return this._borderPosition}},u.SliderMarker=r}(DevExpress),function(n,t){function u(t,i){return new n.viz.Translator2D(t,{top:i[0],height:i[1]})}function f(n,t,i,r,f){var s=t.getSeries(),e,o,c=s.length,h={x:i,y:u(t.getBoundRange().val,r)};for(t.adjustSeriesDimensions(h),o=0;o<c;++o)e=s[o],e._extGroups.seriesGroup=e._extGroups.labelsGroup=n,e.draw(h,f)}function i(n,i){return n!==t?n:i}function r(n){this._params=n,this._clipRect=n.renderer.clipRect(),n.root.attr({clipId:this._clipRect.id})}r.prototype={constructor:r,update:function(n,t,r,u,e,o){var h=this._params.renderer,s=this._params.root;n=n||{},s.clear(),this._clipRect.attr({x:r.left,y:r.top,width:r.width,height:r.height}),u||(i(n.visible,t.visible)&&(n.color&&h.rect(r.left,r.top,r.width+1,r.height).attr({fill:i(n.color,t.color),"class":"dx-range-selector-background"}).append(s),n.image&&n.image.url&&h.image(r.left,r.top,r.width+1,r.height,n.image.url,i(n.image.location,t.image.location)).append(s)),o&&o.isShowChart()&&f(s,o,this._params.translator,[r.top,r.top+r.height],e))}},n.viz.rangeSelector.RangeView=r}(DevExpress),function(n,t,i){function y(t,i,r){n.each(t,function(t,u){n.each(r.getTemplateFields(),function(n,t){u[t.templateField]=u[t.originalField]}),i.push(u)}),r.updateTemplateFieldNames()}var o=t.viz.rangeSelector,s=t.viz.charts,r=t.viz,e=r.CoreFactory,u=t.require("/utils/utils.common"),f,h=function(n){return s.factory.createThemeManager(n,"rangeSelector.chart")},c=function(t){return n.isArray(t)&&t.length>0&&(u.isNumber(t[0])||u.isDate(t[0]))},l=function(n){return r.utils.map(n,function(n,t){return{arg:n,val:t}})},a=function(t,i,r,u,f,o){var h=[],s=[];return n.each(t,function(t,i){n.inArray(i.type,s)===-1&&s.push(i.type)}),n.each(s,function(n,s){var c=new e.createSeriesFamily({type:s,equalBarWidth:i,minBubbleSize:r,maxBubbleSize:u,barWidth:f,negativesAsZeroes:o});c.add(t),c.adjustSeriesValues(),h.push(c)}),h},v=function(t){var u=["bar","candlestick","stock","bubble"],i=!0;return t=r.utils.normalizeEnum(t),n.each(u,function(n,r){if(t.indexOf(r)!==-1)return i=!1,!1}),i};f=o.SeriesDataSource=function(n){var i=this,c,o,t=i._themeManager=h(n.chart),f,e,s,l;t._fontFields=["commonSeriesSettings.label.font"],t.setTheme(n.chart.theme),f=t.getOptions("topIndent"),e=t.getOptions("bottomIndent"),i._indent={top:f>=0&&f<1?f:0,bottom:e>=0&&e<1?e:0},i._valueAxis=t.getOptions("valueAxisRangeSelector")||{},i._hideChart=!1,o=t.getOptions("seriesTemplate"),n.dataSource&&o&&(c=r.utils.processSeriesTemplate(o,n.dataSource)),i._useAggregation=n.chart.useAggregation,i._series=i._calculateSeries(n,c),s=t.getOptions("negativesAsZeroes"),l=t.getOptions("negativesAsZeros"),i._seriesFamilies=a(i._series,t.getOptions("equalBarWidth"),t.getOptions("minBubbleSize"),t.getOptions("maxBubbleSize"),t.getOptions("barWidth"),u.isDefined(s)?s:l)},f.prototype={constructor:f,_calculateSeries:function(t,i){var h=this,o=[],a,v,s,g,w=h._themeManager,b=!!w.getOptions("seriesTemplate"),u=b?i:t.chart.series,nt=t.chart.valueAxis&&t.chart.valueAxis.valueType,p,f,k,d;for(h.templateData=[],t.dataSource&&!u&&(c(t.dataSource)&&(t.dataSource=l(t.dataSource)),p=t.dataSourceField||"arg",u={argumentField:p,valueField:p},h._hideChart=!0),u=n.isArray(u)?u:u?[u]:[],f=0;f<u.length;f++)a=n.extend(!0,{incidentOccured:t.incidentOccured},u[f]),a.rotated=!1,s=a.data||t.dataSource,v=w.getOptions("series",a),v.argumentField=v.argumentField||t.dataSourceField,s&&s.length>0&&(k=e.createSeries({renderer:t.renderer},v),o.push(k)),b&&y(s,h.templateData,k);if(s=b?h.templateData:s,o.length)for(d={groups:[{series:o,valueOptions:{valueType:p?t.valueType:nt}}],argumentOptions:{categories:t.categories,argumentType:t.valueType,type:t.axisType}},g=r.validateData(s,d,t.incidentOccured,w.getOptions("dataPrepareSettings")),h.argCategories=d.categories,f=0;f<o.length;f++)o[f].updateData(g[o[f].getArgumentField()]);return o},adjustSeriesDimensions:function(t){this._useAggregation&&n.each(this._series,function(n,i){i.resamplePoints(t.x)}),n.each(this._seriesFamilies,function(n,i){i.adjustSeriesDimensions({arg:t.x,val:t.y})})},getBoundRange:function(){var f=this,l,a=f._valueAxis.min,y=f._valueAxis.max,t=new r.Range({min:a,minVisible:a,max:y,maxVisible:y,axisType:f._valueAxis.type,base:f._valueAxis.logarithmBase}),o=new r.Range({}),e,s,h,c;return n.each(f._series,function(n,i){l=i.getRangeData(),t.addRange(l.val),o.addRange(l.arg),v(i.type)||o.addRange({stick:!1})}),t.isDefined()&&o.isDefined()&&(h=f._valueAxis.inverted?f._indent.top:f._indent.bottom,c=f._valueAxis.inverted?f._indent.bottom:f._indent.top,e=t.max-t.min,s=(n.isNumeric(t.maxVisible)?t.maxVisible:t.max)-(n.isNumeric(t.minVisible)?t.minVisible:t.min),u.isDate(t.min)?t.min=new Date(t.min.valueOf()-e*h):t.min-=e*h,u.isDate(t.max)?t.max=new Date(t.max.valueOf()+e*c):t.max+=e*c,n.isNumeric(s)&&(t.maxVisible=t.maxVisible?t.maxVisible+s*c:i,t.minVisible=t.minVisible?t.minVisible-s*h:i),t.invert=f._valueAxis.inverted),{arg:o,val:t}},getSeries:function(){var n=this;return n._series},isEmpty:function(){var n=this;return n.getSeries().length===0},isShowChart:function(){return!this._hideChart},getCalculatedValueType:function(){var n=this,t;return n._series.length&&(t=n._series[0].argumentType),t},getThemeManager:function(){return this._themeManager}}}(jQuery,DevExpress),function(n,t){t.viz.rangeSelector.ThemeManager=t.viz.BaseThemeManager.inherit({_themeSection:"rangeSelector",_fontFields:["scale.label.font","sliderMarker.font","loadingIndicator.font","title.font","title.subtitle.font"]})}(jQuery,DevExpress),DevExpress.MOD_VIZ_RANGESELECTOR=!0}