/*! 
* DevExtreme (Range Selector)
* Version: 15.2.4
* Build date: Dec 8, 2015
*
* Copyright (c) 2012 - 2015 Developer Express Inc. ALL RIGHTS RESERVED
* EULA: https://www.devexpress.com/Support/EULAs/DevExtreme.xml
*/
"use strict";if(!window.DevExpress||!DevExpress.MOD_VIZ_RANGESELECTOR){if(!window.DevExpress||!DevExpress.MOD_VIZ_CORE)throw Error("Required module is not referenced: viz-core");(function(n){n.viz.rangeSelector={}})(DevExpress),function(n,t,i){var u=t.require("/utils/utils.common"),e=t.require("/utils/utils.math"),f=t.require("/utils/utils.date").addInterval,r=function(n,t){var r,i,u;if(!n||n.length===0)return-1;for(r=0,i=n.length-1;i-r>1;)u=r+i>>1,n[u]>t?i=u:r=u;return n[i]<=t?i:r},o=function(n,t){var i=r(n,t);return n&&i>=0&&i<n.length?n[i]:t},s=function(n,t){var i=r(n,t);return n&&i>=0&&i<n.length?(i+1<n.length&&(u.isDate(t)?n[i+1].getTime()-t.getTime()<t.getTime()-n[i].getTime()&&i++:n[i+1]-t<t-n[i]&&i++),n[i]):t},h=function(n,t){var i=r(n,t);return n&&i>=0&&i<n.length?(n[i]<t&&i+1<n.length&&i++,n[i]):t},c=function(n){var t=0;return n.pageX?t=n.pageX:n.originalEvent&&n.originalEvent.pageX&&(t=n.originalEvent.pageX),n.originalEvent&&n.originalEvent.touches&&(n.originalEvent.touches.length>0?t=n.originalEvent.touches[0].pageX:n.originalEvent.changedTouches.length>0&&(t=n.originalEvent.changedTouches[0].pageX)),t},l=function(r,f){var l=f.type==="discrete",o=l?f.categories||f._categoriesInfo.categories:i,e=f.startValue,s=f.endValue,h,c,a;return(o&&(o=t.viz.utils.map(o,function(n){return u.isDefined(n)?n.valueOf():null})),l)?(a=n.inArray(r.valueOf(),o),a<0?e:r):(h=e>s?s:e,c=e>s?e:s,r<h&&(r=h),r>c&&(r=c),r)},a=function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}};t.viz.rangeSelector.utils={findLessOrEqualValue:o,findNearValue:s,findGreaterOrEqualValue:h,getEventPageX:c,truncateSelectedRange:l,canvasOptionsToRenderOptions:a,trackerSettings:{fill:"grey",stroke:"grey",opacity:.0001},animationSettings:{duration:250},addInterval:function(n,t,i,r){var u,h=r.type,o=h==="logarithmic"&&r.logarithmBase,s;return o?(s=f(e.getLog(n,o),t,i),u=Math.pow(o,s)):u=f(n,t,i),u}}}(jQuery,DevExpress),function(n){n.viz.rangeSelector.baseVisualElementMethods={init:function(n){this._renderer=n,this._isDrawn=!1},applyOptions:function(n){this._options=n||{},this._applyOptions(this._options)},_applyOptions:function(){},redraw:function(n){var t=this;t._isDrawn?t._update(n||t._group):(t._isDrawn=t._draw(n||t._group)!==!1,n&&(t._group=n))},isDrawn:function(){return!!this._isDrawn},isInitialized:function(){return!!this._options},_draw:function(){},_update:function(n){n.clear(),this._draw(n)}}}(DevExpress),function(n,t,i){function p(n){return{startValue:n.startValue,endValue:n.endValue}}function g(n,t,i){var r=n.text(t,lt,lt).css(dt(i)).append(n.root),u=r.getBBox();return r.remove(),u}function bt(n,t,i,u){var e,o=n[i],h=t.parser||function(){return null},s=t[i];return r(o)&&(e=h(o)),r(e)?s=e:u("E2203",[i]),f.utils.truncateSelectedRange(s,t)}function yi(n){return{top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.width-n.left-n.right,height:n.height-n.top-n.bottom}}var f=t.viz.rangeSelector,o=t.require("/utils/utils.common"),kt=t.require("/utils/utils.math"),w=t.require("/utils/utils.date"),u=t.viz,b=u.utils,dt=b.patchFontOptions,nt=u.parseUtils,tt=b.normalizeEnum,s=t.require("/utils/utils.formatHelper"),gt=t.require("/componentRegistrator"),ni=24,it=4,rt=". . .",r=o.isDefined,e=o.isNumber,a=o.isDate,ti=Math.max,ut=Math.ceil,h=n.noop,k="startValue",ft="endValue",v="datetime",c="selectedRange",l="discrete",y="string",et=c+"Changed",ot="containerBackgroundColor",st="sliderMarker",ht="background",ct="logarithmic",lt=-1e3,ii=10;f.consts={emptySliderMarkerText:rt,pointerSize:it};var at=f.formatValue=function(n,t){var i={value:n,valueText:s.format(n,t.format,t.precision)};return String(o.isFunction(t.customizeText)?t.customizeText.call(i,i):i.valueText)},ri=function(n,t){return{x:u.CoreFactory.createTranslator2D(n.arg,t,{isHorizontal:!0}),y:u.CoreFactory.createTranslator2D(n.val,t)}},ui=function(n,t,i){return{left:t.left,top:t.top,right:n.width-t.width-t.left,bottom:n.height-t.height-t.top+i,width:n.width,height:n.height}},vt=function(n,t,r){var u=t===i?rt:at(t,r),f=g(n,u,r.font);return ut(f.height)+2*r.paddingTopBottom+it},yt=function(n,t,i){var r=at(t,i.label),u=g(n,r,i.label.font);return ut(u.width/2)},fi=function(n,t,i,r,u,f){var e={left:t.left+i.left,top:t.top+i.top,width:t.width-i.left-i.right,height:f?ni+r:t.height-i.top-i.bottom};return e.width<=0&&(e.width=1),e},ei=function(n){var t,i,r;if(e(n))t=i=r=n;else if(n)e(n.height)&&(r=n.height),e(n.width)?t=i=n.width:n.width&&(e(n.width.left)&&(t=n.width.left),e(n.width.right)&&(i=n.width.right));else return null;return{widthLeft:t,widthRight:i,height:r}},oi=function(n,t,r,u,f){var c,l=0,a=0,v,e=0,o=0,h,s;return f=f||{},s=ei(u.placeholderSize),s&&f.left===i&&f.right===i?(e=s.widthLeft,o=s.widthRight):(e=f.left,o=f.right),h=s&&u.placeholderHeight===i?s.height:u.placeholderHeight,u.visible&&(c=vt(n,r.startValue,u),v=vt(n,r.endValue,u),h===i&&(h=ti(c,v))),r.label.visible&&(l=yt(n,r.startValue,r),a=yt(n,r.endValue,r)),e=e!==i?e:l,o=(o!==i?o:a)||1,{left:e,right:o,top:h||0,bottom:0}},pt=function(t,i){var u=n.type(t),f=n.type(i),r=function(n){return u===n||f===n};return r("date")?v:r("number")?"numeric":r(y)?y:""},si=function(n){return n.valueType===v&&n.marker.visible},hi=function(n,t){var i=t.minorTickInterval||t.tickInterval;t.valueType==="datetime"&&(i=w.dateToMilliseconds(i)),n.arg.addRange({interval:i})},d=function(n){return new u.Range(n)},wt=function(n,t,r){var u;n&&(u=n.logarithmBase,n.type===ct&&u<=0||u&&!e(u)?(n.logarithmBase=t,r("E2104")):n.type!==ct&&(n.logarithmBase=i))},ci=function(n,t,i){var u,f="0",e={value:0,valueText:f},r=t.label,s=t.marker,h=r.customizeText,c=t.placeholderHeight,l=o.isFunction(h)?h.call(e,e):f,a=r.visible;return c?c:(u=g(n,l,r.font),(a?r.topIndent+u.height:0)+(i?s.topIndent+s.separatorHeight:0))},li=function(n,t,i,r,f,e){var s=n._categoriesInfo,o=u.CoreFactory.createTickManager({axisType:n.type,dataType:n.valueType},{min:f,max:e,screenDelta:t,customTicks:s&&s.categories},{labelOptions:{},boundCoef:1,minorTickInterval:n.minorTickInterval,tickInterval:n.tickInterval,incidentOccured:i,base:n.logarithmBase,showMinorTicks:!0,withMinorCorrection:!0,stick:r!==!1}),h=o.getTicks(!0);return{tickInterval:o.getTickInterval(),minorTickInterval:o.getMinorTickInterval(),bounds:o.getTickBounds(),ticks:h}},ai=function(n,t){var o,s,v=!1,p,u=t.startValue,f=t.endValue,c,e,h=n?n.getBoundRange():{arg:d(),val:d({isValueRange:!0})},y;return t.type===l&&(y=d({categories:t.categories||(!n&&u&&f?[u,f]:i),minVisible:u,maxVisible:f}),y.addRange(h.arg),h.arg=y,c=y.categories||[],t._categoriesInfo=e=b.getCategoriesInfo(c,u||c[0],f||c[c.length-1])),r(u)&&r(f)?(v=e?e.inverted:u>f,o=e?e.start:v?f:u,s=e?e.end:v?u:f):r(u)||r(f)?(o=u,s=f):e&&(o=e.start,s=e.end),p=a(o)&&a(s)&&o.getTime()===s.getTime(),o===s||p||h.arg.addRange({invert:v,min:o,max:s,minVisible:o,maxVisible:s,dataType:t.valueType}),h.arg.addRange({base:t.logarithmBase,axisType:t.type}),h.arg.isDefined()||(p&&(t.valueType="numeric"),h.arg.setStubData(t.valueType)),h},vi=function(n,t){return!r(n)||!r(t)};gt("dxRangeSelector",f,u.BaseWidget.inherit({_eventsMap:n.extend({},u.BaseWidget.prototype._eventsMap,{onSelectedRangeChanged:{name:et}}),_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{"sliderMarker.padding":{since:"15.1",message:"Use the 'paddingTopBottom' and 'paddingLeftRight' options instead"},"sliderMarker.placeholderSize":{since:"15.1",message:"Use the 'placeholderHeight' and 'indent' options instead"},"scale.majorTickInterval":{since:"15.2",message:"Use the 'tickInterval' options instead"},"scale.showMinorTicks":{since:"15.2",message:"Use the 'minorTick.visible' options instead"}})},_rootClassPrefix:"dxrs",_rootClass:"dxrs-range-selector",_invalidatingOptions:["scale","selectedRangeColor","containerBackgroundColor","sliderMarker","sliderHandle","shutter","background","behavior","chart","indent"],_dataIsReady:function(){return this._dataSource.isLoaded()},_init:function(){var n=this;n.callBase(),n._updateDataSource()},_initCore:function(){this._renderer.root.css({"touch-action":"pan-y","-ms-touch-action":"pan-y"}),this.rangeContainer=new f.RangeContainer(this._renderer)},_getDefaultSize:function(){return{width:400,height:160}},_disposeCore:function(){var n=this,t=function(t){n[t]&&n[t].dispose(),n[t]=null};n.callBase(),t("renderer"),n.translators=null,t("rangeContainer")},_createThemeManager:function(){return new f.ThemeManager},_render:function(n){var t=this,r,i=t._renderer;n=n||t.__isResizing,i.lock(),t._applyOptions(),n?(r=i.animationEnabled(),i.updateAnimationOptions({enabled:!1}),t.rangeContainer.redraw(),i.updateAnimationOptions({enabled:r})):t.rangeContainer.redraw(),i.unlock(),!n&&t._dataSource.isLoaded()&&t.hideLoadingIndicator(),t._drawn()},_handleChangedOptions:function(n){var t=this;t.callBase.apply(t,arguments),"dataSource"in n&&t._updateDataSource(),c in n&&t.setSelectedRange(n[c])},_resize:function(){this._render(!0)},_dataSourceChangedHandler:function(){this._initialized&&this._render()},_applyOptions:function(){var n=this,o,t,f,s,e=n._title.getVerticalCuttedSize(yi(n._canvas)),h,y,d,l=n.option("chart"),w=n._getOption("shutter"),a=n._getOption(ht),b,i,g,nt,u,k,v;n._isUpdating=!0,t=n._createSeriesDataSource(l),b=!(t&&t.isShowChart()||a&&a.image&&a.image.url),t&&(v=t.getThemeManager(),wt(l&&l.valueAxis,v.getOptions("valueAxis").logarithmBase,n._incidentOccured)),i=n._scaleOptions=n._prepareScaleOptions(t),f=ai(t,i),u=f.arg,g=r(u.minVisible)?u.minVisible:u.min,nt=r(u.maxVisible)?u.maxVisible:u.max,k=li(i,e.width,this._incidentOccured,u.stick,g,nt),n._updateScaleOptions(t,f.arg,k),hi(f,i),y=n._prepareSliderMarkersOptions(e.width,k),d=n._initSelection(),h=oi(n._renderer,e,i,y,n.option("indent")),s=ci(n._renderer,i,si(i)),o=fi(n._canvas,e,h,s,n._title,b),n._applyTitleLayout(o,h),n.translators=ri(f,ui(e,o,s)),t&&t.adjustSeriesDimensions(n.translators),w.color=w.color||n._getOption(ot,!0),i.minorTickInterval=i.isEmpty?0:n._getOption("scale").minorTickInterval,n.rangeContainer.applyOptions({canvas:o,isCompactMode:b,scaleLabelsAreaHeight:s,indents:h,translators:n.translators,selectedRange:d,scale:i,behavior:n._getOption("behavior"),background:a,chart:l,seriesDataSource:t,sliderMarker:y,sliderHandle:n._getOption("sliderHandle"),shutter:w,selectedRangeColor:n._getOption("selectedRangeColor",!0),selectedRangeChanged:function(t,i){n.option(c,t),i||n._eventTrigger(et,p(t))},setSelectedRange:function(t){n.setSelectedRange(t)}}),n._isUpdating=!1,v&&v.dispose()},_applyTitleLayout:function(n,t){var i=this._title.getLayoutOptions(),r=this._canvas;i&&this._title.position({at:i.position,my:i.position,of:{getLayoutOptions:function(){return{width:n.width+t.left+t.right,height:n.height+i.height+t.top+t.bottom,x:r.left,y:r.top}}}})},_initSelection:function(){var n=this,t=n._scaleOptions,i=n.option(c),r=n._incidentOccured;return i?{startValue:bt(i,t,k,r),endValue:bt(i,t,ft,r)}:p(t)},_createSeriesDataSource:function(t){var i=this,e,o=i._dataSource.items(),r=i._getOption("scale"),u=r.valueType,s=i.option(ht);return u||(u=pt(r.startValue,r.endValue)),(o||t&&t.series)&&(t=n.extend({},t,{theme:i.option("theme")}),e=new f.SeriesDataSource({renderer:i._renderer,dataSource:o,valueType:tt(u),axisType:r.type,chart:t,dataSourceField:i.option("dataSourceField"),backgroundColor:s&&s.color,incidentOccured:i._incidentOccured,categories:r.categories})),e},_prepareScaleOptions:function(n){var e=this,t=e._getOption("scale"),o=0,u=nt.correctValueType(tt(t.valueType)),f,s=function(n,u){var f=n===k?"start":"end";r(t[n])&&(o=u(t[n]),r(o)?t[n]=o:(t[n]=i,e._incidentOccured("E2202",[f])))};return n&&(u=n.getCalculatedValueType()||u),u||(u=pt(t.startValue,t.endValue)||"numeric"),(u===y||t.categories)&&(t.type=l,u=y),t.valueType=u,f=nt.getParser(u),s(k,f),s(ft,f),wt(t,ii,e._incidentOccured),t.type||(t.type="continuous"),t.tickInterval===i&&(t.tickInterval=t.majorTickInterval),t.minorTick.visible&&(t.minorTick.visible=t.showMinorTicks),t.parser=f,t},_prepareSliderMarkersOptions:function(n,t){var o=this,f=o._scaleOptions,h=t.minorTickInterval,p=t.tickInterval,a=f.endValue,y=f.startValue,u=o._getOption(st),b,c=o.option(st)||{},k=f.type===l,d=f.valueType===v;return u.borderColor=o._getOption(ot,!0),u.format||(!o._getOption("behavior").snapToTicks&&e(f.startValue)&&(b=Math.abs(a-y),u.format="fixedPoint",u.precision=kt.getSignificantDigitPosition(b/n)),d&&!k&&(f.marker.visible?u.format=w.getDateUnitInterval(r(h)&&h!==0?h:p):r(y)&&r(a)&&(u.format=s.getDateFormatByTickInterval(y,a,h!==0?h:p))),d&&k&&(u.format=s.getDateFormatByTicks(t.ticks))),c.padding!==i&&c.paddingLeftRight===i&&c.paddingTopBottom===i&&(u.paddingLeftRight=u.paddingTopBottom=c.padding),u},_updateScaleOptions:function(n,t,u){var f=this._scaleOptions,e,h,o=f._categoriesInfo;!n||n.isEmpty()||t.stubData||(e=u.bounds,t.addRange(e),f.startValue=t.invert?e.maxVisible:e.minVisible,f.endValue=t.invert?e.minVisible:e.maxVisible),o&&(f.startValue=o.start,f.endValue=o.end),f.type!==l&&(h=a(f.startValue)&&a(f.endValue)&&f.startValue.getTime()===f.endValue.getTime()||f.startValue===f.endValue),f.isEmpty=vi(f.startValue,f.endValue)||h,f.isEmpty?f.startValue=f.endValue=i:(f.minorTickInterval=u.minorTickInterval,f.tickInterval=u.tickInterval,f.valueType!==v||r(f.label.format)||(f.label.format=f.type===l?s.getDateFormatByTicks(u.ticks):f.marker.visible?w.getDateUnitInterval(f.tickInterval):s.getDateFormatByTickInterval(f.startValue,f.endValue,f.tickInterval)))},getSelectedRange:function(){return p(this.rangeContainer.getSlidersContainer().getSelectedRange())},setSelectedRange:function(n){var i=this,t;!i._isUpdating&&n&&((t=i.rangeContainer.getSlidersContainer().getSelectedRange(),t&&t.startValue===n.startValue&&t.endValue===n.endValue)||i.rangeContainer.getSlidersContainer().setSelectedRange(n))},resetSelectedRange:function(n){var t=p(this._scaleOptions);t.blockSelectedRangeChanged=n,this.setSelectedRange(t)},render:function(n){var t=this;return t.__isResizing=n,t.callBase.apply(t,arguments),t.__isResizing=null,t},_applySize:h,_initTooltip:h,_setTooltipRendererOptions:h,_setTooltipOptions:h,_hideTooltip:h}))}(jQuery,DevExpress),function(n,t,i){function h(n,t){return{left:n.left-t.left,top:n.top-t.top,width:n.width+t.right+t.left,height:n.height+t.bottom+t.top}}var r=t.viz.rangeSelector,e=r.utils.canvasOptionsToRenderOptions,o=r.baseVisualElementMethods,s=t.require("/utils/utils.date"),f=n.extend,u;u=function(n){var i=this;o.init.apply(i,arguments),i._clipRect=n.clipRect(),i._root=n.g().attr({"class":"rangeContainer",clipId:i._clipRect.id}).linkOn(n.root,"range-container"),i._createGroups(),i._slidersContainer=new r.SlidersContainer(n),i._rangeView=new r.RangeView(n),i._axis=new t.viz.axes.Axis({axesContainerGroup:i._scaleGroup,renderer:n,axisType:"xyAxes",drawingType:"linear",widgetClass:"dxrs",axisClass:"range-selector"})},u.prototype=f({},o,{constructor:u,dispose:function(){var n=this;n._slidersContainer.dispose(),n._axis.dispose(),n._root.linkOff(),n._slidersContainer=n._root=n._rangeView=n._axis=null},getSlidersContainer:function(){return this._slidersContainer},_applyOptions:function(n){var i=n.scaleLabelsAreaHeight,t=n.canvas,r=t.height;this._viewCanvas={left:t.left,top:t.top,width:t.width,height:r>=i?r-i:0},this._options=n},_updateClipRect:function(){this._clipRect.attr(e(h(this._options.canvas,this._options.indents)))},_createViewClipRect:function(){var n=this,t=n._viewCanvas;n._viewClipRect?n._viewClipRect.attr(e(t)):(n._viewClipRect=n._renderer.clipRect(t.left,t.top,t.width,t.height),n._rangeViewGroup.attr({clipId:n._viewClipRect.id}))},_createGroups:function(){var n=this,t=n._renderer;n._rangeViewGroup=t.g().attr({"class":"dxrs-view"}),n._slidersGroup=t.g().attr({"class":"dxrs-slidersContainer"}),n._scaleGroup=t.g().attr({"class":"dxrs-scale"}),n._trackersGroup=t.g().attr({"class":"dxrs-trackers"})},_draw:function(){var n=this,t=n._root;t.linkAppend(),n._rangeViewGroup.append(t),n._options.isCompactMode?(n._scaleGroup.append(t),n._slidersGroup.append(t)):(n._slidersGroup.append(t),n._scaleGroup.append(t)),n._trackersGroup.append(t),n._update()},_update:function(){var n=this;n._updateClipRect(),n._createViewClipRect(),n._drawRangeView(),n._drawAxis(),n._drawSliderContainer(),n._slidersContainer.appendTrackers(n._trackersGroup)},_prepareScaleOptions:function(n){var i=this._options,t=i.scale;return t.label.overlappingBehavior={mode:t.useTicksAutoArrangement?"enlargeTickInterval":"ignore"},t.marker.label.font=t.label.font,t.color=t.marker.color=t.tick.color,t.opacity=t.marker.opacity=t.tick.opacity,t.width=t.marker.width=t.tick.width,t.placeholderSize=(t.placeholderHeight||0)+n,t.argumentType=t.valueType,t.visible=i.isCompactMode,t.isHorizontal=t.withoutOverlappingBehavior=t.stick=!0,i.isCompactMode||(t.minorTick.length=t.tick.length=i.canvas.height-i.scaleLabelsAreaHeight),t.label.indentFromAxis=t.label.topIndent+n,t.setSelectedRange=i.setSelectedRange,t},_drawAxis:function(){var n=this,t=n._options,i=t.canvas,r=t.translators,f=(2*i.top+i.height-t.scaleLabelsAreaHeight)/2,u;n._axis.updateOptions(n._prepareScaleOptions(this._viewCanvas.height+i.top-f-Math.ceil(t.scale.width/2))),n._axis.delta={bottom:f-r.y.translateSpecialCase("canvas_position_bottom")},n._axis.setTranslator(r.x,r.y),n._axis.draw(),u=this._axis.getMarkerTrackers(),u&&n._initializeDateMarkersEvent(u)},_drawSliderContainer:function(){var n=this,e=n._axis.getTranslator(),t=e.getBusinessRange(),i=t.invert,o=n._options,r=o.scale,u=f({type:t.axisType,startValue:i?t.maxVisible:t.minVisible,endValue:i?t.minVisible:t.maxVisible,categories:t.categories,inverted:i,fullTicks:n._axis.getFullTicks(),maxRange:r.maxRange,minRange:r.minRange,isEmpty:r.isEmpty},o);u.canvas=n._viewCanvas,u.translator=e,n._slidersContainer.applyOptions(u),n._slidersContainer.redraw(n._slidersGroup)},_drawRangeView:function(){var n=this,t=f({},n._options);t.canvas=n._viewCanvas,t.isCompactMode||(n._rangeView.applyOptions(t),n._rangeView.redraw(n._rangeViewGroup))},_initializeDateMarkersEvent:function(t){var r=this;n.each(t,function(n,t){t.on("dxpointerdown",function(n){var t=n.target.range,f=r._options,u=f.scale,e=u.minRange?s.addInterval(t.startValue,u.minRange):i,o=u.maxRange?s.addInterval(t.startValue,u.maxRange):i;e&&e>t.endValue||o&&o<t.endValue||f.setSelectedRange(t)})})}}),r.RangeContainer=u}(jQuery,DevExpress),function(n,t,i){function c(n,t){var i=t.startValue&&t.startValue.valueOf(),r=t.endValue&&t.endValue.valueOf(),u=n.startValue&&n.startValue.valueOf(),f=n.endValue&&n.endValue.valueOf();return r===f&&i===u}function f(){var n=this;e.init.apply(n,arguments),n._controller=new r.SlidersController(n._renderer),n._eventsManager=new r.SlidersEventsManager(n._renderer,n._controller,function(t){n._processSelectionChanged(t)}),n._lastSelectedRange={}}var r=t.viz.rangeSelector,s=t.require("/utils/utils.support").pointer,h=t.viz.utils.normalizeEnum,u=r.utils,e=r.baseVisualElementMethods,o=u.trackerSettings;f.prototype=n.extend({},e,{constructor:f,_drawAreaTracker:function(n){var i=this,r,u,t=i._options.canvas,f=i._renderer;r=f.rect(t.left,t.top,t.width,t.height).attr(o).append(n),u=f.rect(t.left,t.top,t.width,t.height).attr(o).css({cursor:"pointer"}).append(n),i._controller.setAreaTrackers(r,u)},_processSelectionChanged:function(n,t){var i=this,r=i.getSelectedRange(),u=!c(r,i._lastSelectedRange);(!n||h(i._options.behavior.callSelectedRangeChanged)==="onmoving")&&u&&(i._updateLastSelectedRange(r,t),i._options.selectedRangeChanged(r),!n&&u&&i.setSelectedRange(r))},_updateLastSelectedRange:function(n){n=n||this._options.selectedRange,this._lastSelectedRange={startValue:n.startValue,endValue:n.endValue}},_applyOptions:function(n){this._controller.applyOptions(n),this._eventsManager.applyOptions({behavior:n.behavior})},_draw:function(n){var t=this,i;s&&(i=t._renderer.root,i&&i.css({msTouchAction:"pinch-zoom"})),t._controller.redraw(n),t._drawAreaTracker(n),t._eventsManager.initialize(),t._update(n,!1)},_updateSelectedView:function(n){var t=this,u=t._options,r=u.canvas,e={"stroke-width":3,stroke:u.selectedRangeColor,sharp:"v"},o=r.top+r.height/2,i=t._selectedView,s=t._selectedViewAppended,f=t._controller;u.isCompactMode?(i?i.attr(e):(t._selectedView=i=t._renderer.path([r.left,o,r.left,o],"line").attr(e),f.setSelectedView(i)),s||(i.append(n),f.removeShutters(),t._selectedViewAppended=!0)):(i&&s&&(i.remove(),t._selectedViewAppended=!1),f.createShutters())},_update:function(n,t){var i=this,r=i._options.isEmpty,u=i._controller,f=i._options.selectedRange;i._eventsManager.setEnabled(!r),r||i._updateSelectedView(n),u.applySelectedRange(r?{}:f),u.applyPosition(i.isDrawn()),t===!1?i._updateLastSelectedRange(f):i._processSelectionChanged(!1,f.blockSelectedRangeChanged),u.redraw(n)},_validateSelectedRange:function(t,r){(r===i||n.type(this._options[t])===n.type(r))&&(this._options.selectedRange[t]=r)},dispose:function(){this._eventsManager.dispose(),this._controller.dispose(),this._eventsManager=null},getSelectedRange:function(){return this._controller.getSelectedRange()},setSelectedRange:function(n){var t=this,r=t._options,f,e,i=r.selectedRange;n&&(f=n.startValue,e=n.endValue),t._validateSelectedRange("startValue",f),t._validateSelectedRange("endValue",e),i.startValue=u.truncateSelectedRange(i.startValue,r),i.endValue=u.truncateSelectedRange(i.endValue,r),t._controller.applySelectedRange(i),t._controller.applyPosition(),t._processSelectionChanged(!1,n&&n.blockSelectedRangeChanged)},appendTrackers:function(n){this._controller.appendTrackers(n)}}),r.SlidersContainer=f}(jQuery,DevExpress),function(n,t,i){var f=t.viz.rangeSelector,e,r=0,u=1,o="discrete";e=f.SlidersController=function(n){var t=[new f.Slider(n,r),new f.Slider(n,u)];t[r].setAnotherSlider(t[u]),t[u].setAnotherSlider(t[r]),this._sliders=t},e.prototype={constructor:e,_callMethodForBothSliders:function(n,t){this._sliders[r][n](t),this._sliders[u][n](t)},_applySelectedRangePosition:function(n){var t=this,i=t._options,e=i.canvas,o=e.top+e.height/2,c=i.behavior.animationEnabled&&!n,s=t._sliders[r].getPosition(),h=[s,o,s+t.getSelectedRangeInterval(),o],u=t._selectedView;u&&i.isCompactMode&&(c?u.animate({points:h},f.utils.animationSettings):u.stopAnimation().attr({points:h}))},setAreaTrackers:function(n,t){this._areaTracker=n,this._selectedAreaTracker=t},applyOptions:function(n){var i=this,t=null;i._options=n,i._callMethodForBothSliders("applyOptions",n),n.behavior.snapToTicks&&n.type!==o&&(t=n.fullTicks,t[0]>t[t.length-1]&&t.reverse()),i._callMethodForBothSliders("setAvailableValues",t)},processDocking:function(n){var t=this;n!==i?t._sliders[n].processDocking():t._callMethodForBothSliders("processDocking"),t.setTrackersCursorStyle("default"),t.applyAreaTrackersPosition(),t._applySelectedRangePosition()},setSelectedView:function(n){this._selectedView=n},getSelectedRangeInterval:function(){return this._sliders[u].getPosition()-this._sliders[r].getPosition()},moveSliders:function(n,t){var i=this._sliders[r];i.setPosition(i.getPosition()+n,!1,t),this.applyPosition(!0)},moveSlider:function(n,t,i,u,f,e){var o=this,s=o._sliders[n],l=s.getAnotherSlider(),a=l.getPosition(),h,c;s.canSwap()&&(n===r?i>a:i<a)&&(c=t,t||Math.abs(u)>=Math.abs(f)&&(c=!0,h=u*f<0?1:-1,i=i+h*2*f,e(-h*f)),c&&(o.swapSliders(),l.applyPosition(!0))),s.setPosition(i,!0),s.applyPosition(!0),o.applyAreaTrackersPosition(),o._applySelectedRangePosition(!0),o.setTrackersCursorStyle("w-resize")},applySelectedAreaCenterPosition:function(n){var t=this,u=t._sliders[r],i=t.getSelectedRangeInterval(),f=i/2;u.setPosition(n-f,!1,i),t.applyPosition(),t.processDocking()},endSelection:function(){var n=this,t=n._sliders[r],i=n._sliders[u],f=t.getCloudBorder()>i.getCloudBorder();n._callMethodForBothSliders("setOverlapped",f)},processManualSelection:function(n,t,i){var e=n<t,o=+!e,u=+e,f=[Math.min(n,t),Math.max(n,t)],r=this._sliders[u],s=this._sliders[o];r.setPosition(f[u]),s.setPosition(f[o]),r.setPosition(f[u],!0),r.startEventHandler(i),s.processDocking(),r.applyPosition(!0)},applySelectedRange:function(n){var s=this,h=s._options,c=h.inverted,l=s._sliders[r],a=s._sliders[u],i=n.startValue,f=n.endValue,e,v=function(n,t,i){(i?a:l).setValue(n),(i?l:a).setValue(t)};h.type!==o?v(i,f,!c&&i>f||c&&i<f):(e=t.viz.utils.getCategoriesInfo(h.categories,i,f),v(e.start,e.end,e.inverted^c))},getSelectedRange:function(){return{startValue:this._sliders[r].getValue(),endValue:this._sliders[u].getValue()}},swapSliders:function(){this._sliders.reverse(),this._callMethodForBothSliders("changeLocation")},applyAreaTrackersPosition:function(){var n=this,e=n.getSelectedRange(),t=n._options,i=t.canvas,o=n._sliders[r].getPosition(),s=n._sliders[u].getPosition()-o,h={cursor:t.endValue-t.startValue==e.endValue-e.startValue?"default":"pointer"};n._selectedAreaTracker.attr({x:o,width:s<0?0:s,y:i.top,height:i.height}).css(h),n._areaTracker.attr(f.utils.canvasOptionsToRenderOptions(i))},applyPosition:function(n){var t=this;t._callMethodForBothSliders("applyPosition",n),t.applyAreaTrackersPosition(),t._applySelectedRangePosition(n)},redraw:function(n){this._callMethodForBothSliders("redraw",n),this._foregroundSliderIndex=u},toForeground:function(n){var t=n.getIndex();this._foregroundSliderIndex!==t&&(n.toForeground(),this._foregroundSliderIndex=t)},appendTrackers:function(n){var t=this;t._areaTracker&&t._selectedAreaTracker&&(t._areaTracker.append(n),t._selectedAreaTracker.append(n)),t._callMethodForBothSliders("appendTrackers",n)},getSlider:function(n){return this._sliders[n]},getAreaTracker:function(){return this._areaTracker},getSelectedAreaTracker:function(){return this._selectedAreaTracker},setTrackersCursorStyle:function(n){n={cursor:n},this._selectedAreaTracker.css(n),this._areaTracker.css(n)},createShutters:function(){this._callMethodForBothSliders("createShutter")},removeShutters:function(){this._callMethodForBothSliders("removeShutter")},dispose:function(){this._callMethodForBothSliders("dispose")}}}(jQuery,DevExpress),function(n,t,i){var e=t.viz.rangeSelector,s=t.require("/ui/events/pointer/ui.events.pointer"),a=10,h=0,v=1,y=t.require("/ui/events/ui.events.utils"),c=y.addNamespace,l,p=e.utils,r=p.getEventPageX,w=0;e.events={start:s.down,move:s.move,end:s.up};var u=function(n){var r=n||window.event,t=r.originalEvent,f=r.touches,u=t?t.pointerType:!1,e=t?t.touches:!1,o=r.which===i&&r.button===1,s=t&&u!==i&&(u===(t.MSPOINTER_TYPE_TOUCH||"touch")||u===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&t.buttons===1),h=o||r.which===1,c=f&&f.length>0||e&&e.length>0;return h||s||c},o=function(n){var t=n.originalEvent,i=n.touches,r=t?t.touches:!1;return i&&i.length>1||r&&r.length>1||null},f=function(n){return n&&n.type&&n.type.indexOf("touch")===0};l=e.SlidersEventsManager=function(n,t,i){var r=this,u=r._uniqueNS="dx-range-selector_"+w++,f=e.events;r._renderer=n,r._slidersController=t,r._processSelectionChanged=i,r._enabled=!0,r._eventsNames={start:c(f.start,u),move:c(f.move,u),end:c(f.end,u)}},l.prototype={constructor:l,_initializeSliderEvents:function(t){var h=this,v,e=h._slidersController,a=h._processSelectionChanged,i=e.getSlider(t),y,c,s,p=function(){s&&(s=!1,e.endSelection(),e.processDocking(),a(!1))},w=function(n){var t,l,p=h._renderer.getRootOffset().left,w,b=i.getIndex();v===f(n)&&(!u(n,!0)&&s?(s=!1,e.processDocking(),a(!1)):s&&(o(n)||n.preventDefault(),t=r(n),w=t-c-p,l=t-i.getPosition()-p,e.moveSlider(b,y,w,l,c,function(n){c=n}),a(!0)),e.endSelection())},l=h._eventsNames;i.startEventHandler=function(n){h._enabled&&u(n)&&!s&&(y=this===i.getSliderTracker().element,s=!0,v=f(n),c=r(n)-i.getPosition()-h._renderer.getRootOffset().left,o(n)||(n.stopPropagation(),n.preventDefault()))};i.on(l.move,function(){e.toForeground(i)});i.on(l.start,i.startEventHandler);n(document).on(l.end,p).on(l.move,w)},_initializeAreaEvents:function(){var t=this,c,e=t._slidersController,s=t._processSelectionChanged,l=e.getAreaTracker(),i=!1,o,v=function(n){var u;i&&(u=r(n),t._options.behavior.moveSelectedRangeByClick&&Math.abs(o-u)<a&&e.applySelectedAreaCenterPosition(u-t._renderer.getRootOffset().left),i=!1,e.endSelection(),s(!1))},y=function(n){var h,l,v,y=t._renderer.getRootOffset().left;c===f(n)&&(i&&!u(n)&&(i=!1,s(!1)),i&&(h=r(n),t._options.behavior.manualRangeSelectionEnabled&&Math.abs(o-h)>=a&&(l=o-y,v=h-y,e.processManualSelection(l,v,n),i=!1,s(!0))))},h=t._eventsNames;l.on(h.start,function(n){t._enabled&&u(n)&&!i&&(i=!0,c=f(n),o=r(n))});n(document).on(h.end,v).on(h.move,y)},_initializeSelectedAreaEvents:function(){var e=this,l,t=e._slidersController,s=e._processSelectionChanged,y=t.getSelectedAreaTracker(),i=!1,a,v,p=function(){i&&(i=!1,t.processDocking(),s(!1))},w=function(n){var e,c;l===f(n)&&(i&&!u(n)&&(i=!1,t.processDocking(),s(!1)),i&&(o(n)||n.preventDefault(),c=r(n),e=c-t.getSlider(h).getPosition()-a,t.moveSliders(e,v),s(!0)),t.endSelection())},c=e._eventsNames;y.on(c.start,function(n){e._enabled&&u(n)&&!i&&(i=!0,l=f(n),a=r(n)-t.getSlider(h).getPosition(),v=t.getSelectedRangeInterval(),o(n)||(n.stopPropagation(),n.preventDefault()))});n(document).on(c.end,p).on(c.move,w)},applyOptions:function(n){this._options=n},dispose:function(){n(document).off("."+this._uniqueNS)},initialize:function(){var n=this;n._initializeSelectedAreaEvents(n),n._initializeAreaEvents(),n._initializeSliderEvents(h),n._initializeSliderEvents(v)},setEnabled:function(n){this._enabled=n}}}(jQuery,DevExpress),function(n,t,i){function k(n,t,i){return Math.abs(t-n)<i}function h(n,t){a.init.apply(this,arguments),this._index=t}var f=t.viz.rangeSelector,u=f.utils,c=t.require("/utils/utils.support"),v=t.require("/utils/utils.date"),y=t.require("/utils/utils.common"),p=c.touchEvents,w=c.pointer,l=8,b=20,r=0,o=1,s="discrete",a=f.baseVisualElementMethods,e=u.addInterval;h.prototype=n.extend({},a,{constructor:h,_createSlider:function(n){var t=this,r,i,u=t._options.sliderHandle,f=t._options.canvas,e=t._renderer;return i=e.g().attr({"class":"slider",translateX:f.left,translateY:f.top}).append(n),r=e.path([0,0,0,f.height],"line").attr({"stroke-width":u.width,stroke:u.color,"stroke-opacity":u.opacity,sharp:"h"}).append(i),i.setValid=function(n){r.attr({stroke:n?t._options.sliderHandle.color:t._options.sliderMarker.invalidRangeColor})},i.updateHeight=function(){r.attr({points:[0,0,0,t._options.canvas.height]})},i.applyOptions=function(n){r.attr(n)},i},_createSliderTracker:function(n){var t=this,r=t._options.sliderHandle.width,h=l<r?r:l,f=p||w?b:h,e,o=t._options.canvas,s=t._renderer,i=s.g().attr({"class":"sliderTracker",translateX:0,translateY:o.top}).append(n);return e=s.rect(-f/2,0,f,o.height).attr(u.trackerSettings).css({cursor:"w-resize"}).append(i),i.updateHeight=function(){e.attr({height:t._options.canvas.height})},i},_setPosition:function(n,t){var i=this,r=i._correctPosition(n),u=i._options.translator.untranslate(r,i._getValueDirection());i.setValue(u,t,!1),i._position=r},_getValueDirection:function(){return this._options.type===s?this._index===r?-1:1:0},_setPositionForBothSliders:function(n,t){var r=this,h=r.getAnotherSlider(),u,f,e,o=r._options,a=o.canvas,y=a.left+a.width,c=o.translator,l=r._getValueDirection(),p=h._getValueDirection(),s=function(n,i,u){var f=u?p:l,e=u?l:p;return c.untranslate(r._correctBounds(v.addInterval(c.translate(n,f),t,i)),e)};n=r._correctBounds(n),u=c.untranslate(n,l),f=s(u),e=n+t,e>y?(f=o.endValue,e=y,u=s(f,!0,!0),n=r._correctBounds(e-t)):e=r._correctBounds(e),r._values&&((o.inverted?u>r._values[r._values.length-1]:u<r._values[0])?(u=r._correctByAvailableValues(u,!1),f=s(u)):(f=r._correctByAvailableValues(f,!1),u=s(f,!0))),h.setValue(f,i,!1),r.setValue(u,i,!1),r._position=n,h._position=e},_correctPosition:function(n){return this._correctBounds(this._correctInversion(n))},_correctInversion:function(n){var t=this._anotherSlider.getPosition(),i=this._index===r?n>t:n<t;return i?t:n},_correctBounds:function(n){var i=n,t=this._options.canvas;return n<t.left&&(i=t.left),n>t.left+t.width&&(i=t.left+t.width),i},_correctValue:function(n,t,i){var u=this,r=u._correctByAvailableValues(n,i);return t&&(r=u._correctByMinMaxRange(r)),u._options.type!==s&&(r=u._correctByMinRange(r)),r},_correctByAvailableValues:function(n,t){var i=this._values;return!t&&i?u.findNearValue(i,n):n},_correctByMinMaxRange:function(n){var f=this,h=n,t=f._options,y=f._values,b=f._index,d=f.getAnotherSlider(),w=d.getValue(),p=!0,c,l,g=t.maxRange,nt=t.minRange,v,a;return t.type===s?k(f.getPosition(),d.getPosition(),t.translator.getInterval())&&(p=!1,h=w):(v=!t.inverted&&b===r||t.inverted&&b===o,g&&(a=e(w,g,v,t),v?c=a:l=a),nt&&(a=e(w,nt,v,t),v?l=a:c=a),l!==i&&h>l?(h=y?u.findLessOrEqualValue(y,l):l,p=!1):c!==i&&h<c&&(h=y?u.findGreaterOrEqualValue(y,c):c,p=!1)),f._setValid(p),h},_correctByMinRange:function(n){var s=this,t=s._options,r,u,f=t.minRange,i=n;return f&&(s._index===o?(r=e(t.startValue,f,t.inverted,t),(!t.inverted&&i<r||t.inverted&&i>r)&&(i=r)):(u=e(t.endValue,f,!t.inverted,t),(!t.inverted&&i>u||t.inverted&&i<u)&&(i=u))),i},_applySliderPosition:function(n,t){var i=this,o=i._options,h=o.behavior.animationEnabled&&!t,f=i._slider,e=i._sliderTracker,r={translateX:n,translateY:o.canvas.top},s=u.animationSettings;i._marker&&i._marker.setPosition(n),h?(f.animate(r,s),e.animate(r,s)):(f.stopAnimation().attr(r),e.stopAnimation().attr(r)),e.updateHeight(),f.updateHeight()},_applyShutterPosition:function(n,t){var s=this,f,h=s._options,c=s._shutter,v=h.behavior.animationEnabled&&!t,l=s._index,i=h.canvas,a=h.sliderHandle.width/2,e;c&&(l===r?(e=n-i.left-Math.floor(a),e<0&&(e=0),f={x:i.left,y:i.top,width:e,height:i.height}):l===o&&(f={x:n+Math.ceil(a),y:i.top,width:i.left+i.width-n,height:i.height}),v?c.animate(f,u.animationSettings):c.stopAnimation().attr(f))},_setValid:function(n){this._marker&&this._marker.setValid(n),this._slider.setValid(n)},_setText:function(n){this._marker&&this._marker.setText(n)},_update:function(){var n=this,t=n._options,u=t.shutter,i=t.sliderHandle,r=n._marker;r&&(r.applyOptions(t.sliderMarker),r.setCanvas(n._options.canvas)),n._shutter&&n._shutter.attr({fill:u.color,"fill-opacity":u.opacity}),n._slider&&n._slider.applyOptions({"stroke-width":i.width,stroke:i.color,"stroke-opacity":i.opacity})},_draw:function(n){var t=this,r,i,e,u=t._options,s=t._renderer;t._container=e=s.g().attr({"class":"sliderArea"}).append(n),r=t._createSlider(e),u.sliderMarker.visible&&(i=new f.SliderMarker({renderer:s,isLeftPointer:t._index===o,sliderMarkerOptions:u.sliderMarker}),i.setCanvas(u.canvas),i.draw(r)),t._slider=r,t._marker=i,t._sliderTracker=t._createSliderTracker(n)},toForeground:function(){this._container.toForeground()},_applyOptions:function(){this._lastPosition=null},getIndex:function(){return this._index},setAvailableValues:function(n){this._values=n},setAnotherSlider:function(n){this._anotherSlider=n},getAnotherSlider:function(){return this._anotherSlider},appendTrackers:function(n){this._sliderTracker&&this._sliderTracker.append(n)},getSliderTracker:function(){return this._sliderTracker},changeLocation:function(){var n=this;n._marker&&n._marker.changeLocation(),n._index=+!n._index,n._options.type===s&&n.setPosition(n._position),n._lastPosition=null},setPosition:function(n,t,u){var f=this,e;u!==i?(e=f._index===r?f:f.getAnotherSlider(),e._setPositionForBothSliders(n,u)):f._setPosition(n,t)},getPosition:function(){return this._position},setValue:function(n,t,u){var e=this,o=e._options,s=o.canvas,h,c;n===i?(e._value=i,h=e._index===r?s.left:s.left+s.width,c=f.consts.emptySliderMarkerText):(e._value=e._correctValue(n,t,y.isDefined(u)?!!u:!0),h=o.translator.translate(e._value,e._getValueDirection()),c=f.formatValue(e._value,o.sliderMarker)),e._setText(c),e._valuePosition=e._position=h},setOverlapped:function(n){this._marker&&this._marker.setOverlapped(n)},getValue:function(){return this._value},canSwap:function(){var i=this,n=i._options,u,f,t;if(i._options.behavior.allowSlidersSwap){if(n.minRange)if(t=i.getAnotherSlider().getValue(),i._index===r){if(f=e(n.endValue,n.minRange,!n.inverted,n),!n.inverted&&t>f||n.inverted&&t<f)return!1}else if(u=e(n.startValue,n.minRange,n.inverted,n),!n.inverted&&t<u||n.inverted&&t>u)return!1;return!0}return!1},processDocking:function(){var n=this;n._position=n._valuePosition,n.applyPosition(!1),n._setValid(!0)},applyPosition:function(n){var t=this,i=t.getPosition();t._lastPosition!==i&&(t._applySliderPosition(i,n),t._applyShutterPosition(i,n),t._lastPosition=i)},on:function(n,t){var i=this,r=i._marker,u=r&&r.getTracker(),f=i._sliderTracker;f&&f.on(n,t),u&&u.on(n,t)},createShutter:function(){var n=this,t=n._options.canvas,i=n._index===r?0:t.width;n._shutter||(n._shutter=n._renderer.rect(t.left,t.top,i,t.height)),n._shutter.append(n._container)},removeShutter:function(){this._shutter&&this._shutter.remove()},getCloudBorder:function(){return this._marker?this._marker.getBorderPosition():0},dispose:function(){this._marker&&this._marker.dispose()}}),f.Slider=h}(jQuery,DevExpress),function(n,t){var o=t.viz,s=o.utils.patchFontOptions,u=o.rangeSelector,f,h=75,r=u.consts.pointerSize,e=function(n,t){var i=n._options;return{width:Math.round(2*i.paddingLeftRight+t.width),height:Math.round(2*i.paddingTopBottom+t.height)}},c=function(n,t){var p=e(n,t),f=p.width,c=p.height,i=-f,u=0,o=r,a=0,s=-r,l=n._position,h=n._canvas,v=n._isLeftPointer,w=function(){i++,u++,o++,a++,s++},b=function(){o>u?o=u:s<i&&(s=i),v&&w()},y=l;return v?l>h.left+h.width-f?(u=-l+(h.left+h.width),i=u-f,b(),y+=i):(i=s=0,u=f):l-h.left<f?(i=-(l-h.left),u=i+f,b(),y+=u):(o=0,w()),n._borderPosition=y,{offset:i,isCutted:(!v||a!==s)&&(v||a!==o),points:[i,0,u,0,u,c,o,c,a,c+r,s,c,i,c]}},l=function(n){var t=n._label.getBBox();return!n._textHeight&&isFinite(t.height)&&(n._textHeight=t.height),{width:t.width,height:n._textHeight,y:t.y}};f=u.SliderMarker=function(t){var i=this;i._renderer=t.renderer,i._text=t.text,i._isLeftPointer=t.isLeftPointer,i._options=n.extend(!0,{},t.sliderMarkerOptions),i._options.textFontStyles=s(i._options.font),i._isValid=!0,i._isOverlapped=!1},f.prototype={constructor:f,_update:function(){function f(t,i){var u,f,s;i=i||e(n,t),n._sliderMarkerGroup.attr({translateY:-(i.height+r)}),f=c(n,t),u=f.points,s=f.offset,n._area.attr({points:u}),n._border.attr({x:n._isLeftPointer?u[0]-1:u[2],height:f.isCutted?i.height:i.height+r}),n._tracker.attr({translateX:s,width:i.width,height:i.height+r}),n._label.attr({translateX:o.paddingLeftRight+s,translateY:i.height/2-(t.y+t.height/2)})}var n=this,i,o=n._options,t,u;(clearTimeout(n._timeout),n._drawn)&&(n._label.attr({text:n._text||""}),t=l(n),u=e(n,t),i=n._textSize||t,i=n._textSize=t.width>i.width||t.height>i.height?t:i,n._timeout=setTimeout(function(){f(t,u),n._textSize=t},h),f(i))},draw:function(n){var t=this,i=t._options,f=t._renderer,e=t._sliderMarkerGroup=f.g().attr({"class":"sliderMarker"}).append(n);t._area=f.path([],"area").attr({fill:i.color}).append(e),t._label=f.text(t._text,0,0).attr({align:"left"}).css(i.textFontStyles).append(e),t._tracker=f.rect(0,0,2*i.paddingLeftRight,2*i.paddingTopBottom+r).attr(u.utils.trackerSettings).css({cursor:"pointer"}).append(e),t._border=f.rect(0,0,1,0).attr({fill:i.borderColor}),t._drawn=!0,t._update()},setText:function(n){this._text!==n&&(this._text=n)},setPosition:function(n){this._position=n,this._update()},changeLocation:function(){var n=this;n._isLeftPointer=!n._isLeftPointer,n._update()},applyOptions:function(n){var t=this;t._textHeight=null,t._area.attr({fill:n.color}),t._border.attr({fill:n.borderColor}),t._label.css(s(n.font)),t._update()},getTracker:function(){return this._tracker},setValid:function(n){var t=this,i=t._options;t._isValid!==n&&(t._isValid=n,t._area.attr({fill:n?i.color:i.invalidRangeColor}))},dispose:function(){clearTimeout(this._timeout)},setOverlapped:function(n){var t=this._border;this._isOverlapped!==n&&(n?t.append(this._sliderMarkerGroup):this._isOverlapped&&t.remove(),this._isOverlapped=n)},getBorderPosition:function(){return this._borderPosition},setCanvas:function(n){this._canvas=n}}}(jQuery,DevExpress),function(n,t){var u=t.viz.rangeSelector,r,f=u.baseVisualElementMethods;r=function(){f.init.apply(this,arguments)},r.prototype=n.extend({},f,{constructor:r,_draw:function(n){var h=this,u,r,t=h._options,i=t.canvas,c=t.scale.isEmpty,o=h._renderer,f=t.seriesDataSource,l=f&&f.isShowChart()&&!c,s=t.background,a=l?f.getBackgroundColor():s.color,e=s.image,v=s.visible,y;if(v&&!c&&a&&o.rect(i.left,i.top,i.width+1,i.height).attr({fill:a,"class":"dx-range-selector-background"}).append(n),v&&e&&e.url&&o.image(i.left,i.top,i.width+1,i.height,e.url,e.location).append(n),l)for(u=f.getSeries(),f.adjustSeriesDimensions(t.translators,t.chart.useAggregation),y=t.behavior&&t.behavior.animationEnabled&&o.animationEnabled(),r=0;r<u.length;r++)u[r]._extGroups.seriesGroup=n,u[r]._extGroups.labelsGroup=n,u[r].draw(t.translators,y)}}),u.RangeView=r}(jQuery,DevExpress),function(n,t,i){function y(t,i,r){n.each(t,function(t,u){n.each(r.getTeamplatedFields(),function(n,t){u[t.teamplateField]=u[t.originalField]}),i.push(u)}),r.updateTeamplateFieldNames()}var o=t.viz.rangeSelector,s=t.viz.charts,r=t.viz,e=r.CoreFactory,u=t.require("/utils/utils.common"),f,h=function(n){return s.factory.createThemeManager(n,"rangeSelector.chart")},c=function(t){return n.isArray(t)&&t.length>0&&(u.isNumber(t[0])||u.isDate(t[0]))},l=function(n){return r.utils.map(n,function(n,t){return{arg:n,val:t}})},a=function(t,i,r,u,f){var s=[],o=[];return n.each(t,function(t,i){n.inArray(i.type,o)===-1&&o.push(i.type)}),n.each(o,function(n,o){var h=new e.createSeriesFamily({type:o,equalBarWidth:i,minBubbleSize:r,maxBubbleSize:u,barWidth:f});h.add(t),h.adjustSeriesValues(),s.push(h)}),s},v=function(t){var u=["bar","candlestick","stock","bubble"],i=!0;return t=r.utils.normalizeEnum(t),n.each(u,function(n,r){if(t.indexOf(r)!==-1)return i=!1,!1}),i};f=o.SeriesDataSource=function(n){var i=this,o,e,t=i._themeManager=h(n.chart),u,f;t._fontFields=["commonSeriesSettings.label.font"],t.setTheme(n.chart.theme),u=t.getOptions("topIndent"),f=t.getOptions("bottomIndent"),i._indent={top:u>=0&&u<1?u:0,bottom:f>=0&&f<1?f:0},i._valueAxis=t.getOptions("valueAxisRangeSelector")||{},i._hideChart=!1,e=t.getOptions("seriesTemplate"),n.dataSource&&e&&(o=r.utils.processSeriesTemplate(e,n.dataSource)),i._series=i._calculateSeries(n,o),i._seriesFamilies=a(i._series,t.getOptions("equalBarWidth"),t.getOptions("minBubbleSize"),t.getOptions("maxBubbleSize"),t.getOptions("barWidth"))},f.prototype={constructor:f,_calculateSeries:function(t,i){var s=this,h=[],a,v,o,p,g,b=s._themeManager,k=!!b.getOptions("seriesTemplate"),u=k?i:t.chart.series,tt=t.chart.valueAxis&&t.chart.valueAxis.valueType,w,f,d,nt;for(s.teamplateData=[],t.dataSource&&!u&&(c(t.dataSource)&&(t.dataSource=l(t.dataSource)),w=t.dataSourceField||"arg",u={argumentField:w,valueField:w},s._hideChart=!0),u=n.isArray(u)?u:u?[u]:[],s._backgroundColor=t.backgroundColor,f=0;f<u.length;f++)a=n.extend(!0,{incidentOccured:t.incidentOccured},u[f]),a.rotated=!1,o=a.data||t.dataSource,v=b.getOptions("series",a),v.argumentField=v.argumentField||t.dataSourceField,o&&o.length>0&&(d=e.createSeries({renderer:t.renderer},v),h.push(d)),k&&y(o,s.teamplateData,d);for(o=k?s.teamplateData:o,p=[h],p.argumentOptions={categories:t.categories,argumentType:t.valueType,type:t.axisType},p[0].valueOptions={valueType:w?t.valueType:tt},g=r.validateData(o,p,t.incidentOccured,b.getOptions("dataPrepareSettings")),f=0;f<h.length;f++)nt=h[f],nt.updateData(g);return h},adjustSeriesDimensions:function(t,i){var r=this;i&&n.each(r._series||[],function(n,i){i.resamplePoints(t.x)}),n.each(r._seriesFamilies,function(n,i){i.adjustSeriesDimensions({arg:t.x,val:t.y})})},getBoundRange:function(){var f=this,l,a=f._valueAxis.min,y=f._valueAxis.max,t=new r.Range({isValueRange:!0,min:a,minVisible:a,max:y,maxVisible:y,axisType:f._valueAxis.type,base:f._valueAxis.logarithmBase}),o=new r.Range({}),e,s,h,c;return n.each(f._series,function(n,i){l=i.getRangeData(),t.addRange(l.val),o.addRange(l.arg),v(i.type)||o.addRange({stick:!1})}),t.isDefined()&&o.isDefined()&&(h=f._valueAxis.inverted?f._indent.top:f._indent.bottom,c=f._valueAxis.inverted?f._indent.bottom:f._indent.top,e=t.max-t.min,s=(n.isNumeric(t.maxVisible)?t.maxVisible:t.max)-(n.isNumeric(t.minVisible)?t.minVisible:t.min),u.isDate(t.min)?t.min=new Date(t.min.valueOf()-e*h):t.min-=e*h,u.isDate(t.max)?t.max=new Date(t.max.valueOf()+e*c):t.max+=e*c,n.isNumeric(s)&&(t.maxVisible=t.maxVisible?t.maxVisible+s*c:i,t.minVisible=t.minVisible?t.minVisible-s*h:i),t.invert=f._valueAxis.inverted),{arg:o,val:t}},getSeries:function(){var n=this;return n._series},getBackgroundColor:function(){return this._backgroundColor},isEmpty:function(){var n=this;return n.getSeries().length===0},isShowChart:function(){var n=this;return!n.isEmpty()&&!n._hideChart},getCalculatedValueType:function(){var n=this,t;return n._series.length&&(t=n._series[0].argumentType),t},getThemeManager:function(){return this._themeManager}}}(jQuery,DevExpress),function(n,t){t.viz.rangeSelector.ThemeManager=t.viz.BaseThemeManager.inherit({_themeSection:"rangeSelector",_fontFields:["scale.label.font","sliderMarker.font","loadingIndicator.font","title.font","title.subtitle.font"]})}(jQuery,DevExpress),DevExpress.MOD_VIZ_RANGESELECTOR=!0}